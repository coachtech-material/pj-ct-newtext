# Tutorial 7-2-5: 配列の操作

## 🎯 このセクションで学ぶこと

*   配列とは何か、複数の値を、一つの変数に、まとめて格納する方法を理解する。
*   インデックス配列と、連想配列の、2種類の配列を、作成し、利用する方法を学ぶ。
*   配列の要素を、追加、取得、更新、削除する方法を学ぶ。
*   `foreach`ループと、配列を組み合わせて、複数のデータを、効率的に処理する方法を、再確認する。

---

## 導入

もし、一週間の曜日を、変数に保存したい場合、どうしますか？ `$day1 = "月";`, `$day2 = "火";`, ... のように、7つの変数を、用意しますか？ これでは、変数が、増えすぎて、管理が大変です。

このような場合に、**複数の値を、一つの変数に、まとめて、格納できる**のが、**配列 (Array)** です。配列は、プログラミングにおいて、最も、基本的で、重要な、データ構造の一つであり、関連するデータを、グループとして、扱うことを可能にします。

Laravelで、データベースから、複数のユーザー情報を、取得した場合、その結果は、配列として返されます。このセクションでは、PHPにおける、配列の基本的な、作成方法と、操作方法について、詳しく学んでいきます。

---

## 詳細解説

### 📦 配列とは？

配列は、**複数の値を、順番に、格納できる、大きな箱**のようなものです。箱の中には、**値 (Value)** と、その値が、どこにあるかを示す、**キー (Key)** が、ペアで格納されています。

PHPには、主に、2種類の配列があります。

1.  **インデックス配列 (Indexed Array)**: キーが、`0`, `1`, `2`, ... のような、**数値のインデックス**になっている配列。単純に、複数の値を、順番に並べたい場合に使う。
2.  **連想配列 (Associative Array)**: キーが、`"name"`, `"age"`, `"email"` のような、**意味のある文字列**になっている配列。各値が、何を表しているのかを、明確にしたい場合に使う。

### ✍️ 配列の作成

PHPでは、角括弧 `[]` を使って、簡単に、配列を作成することができます。

```php
// インデックス配列の作成
$fruits = ["りんご", "バナナ", "みかん"];

// 連想配列の作成
$user = [
    "name" => "山田 太郎",
    "age" => 30,
    "email" => "yamada@example.com",
];
```

*   インデックス配列では、値だけを、カンマ区切りで、記述します。キーは、自動的に、0から、順番に割り振られます。
*   連想配列では、`キー => 値` の形式で、キーと値を、ペアで記述します。

### 🔎 要素へのアクセス

配列の中の、特定の要素に、アクセスするには、`変数名[キー]` の形式で、キーを指定します。

```php
$fruits = ["りんご", "バナナ", "みかん"];

echo $fruits[0]; // "りんご" (インデックスは0から始まる)
echo $fruits[1]; // "バナナ"

$user = [
    "name" => "山田 太郎",
    "age" => 30,
];

echo $user["name"]; // "山田 太郎"
echo $user["age"];  // 30
```

> **⚠️ 注意: インデックスは0から始まる**
> プログラミングの、多くの言語では、配列のインデックスは、`1`ではなく、`0`から始まります。これは、初学者が、非常につまずきやすいポイントなので、しっかりと、覚えておきましょう。「1番目の要素は、キー`0`」です。

### ✏️ 要素の追加と更新

#### 追加

配列の末尾に、新しい要素を、追加するには、`[]` を使います。

```php
$fruits = ["りんご", "バナナ"];

// 末尾に要素を追加
$fruits[] = "みかん";

print_r($fruits); // Array ( [0] => りんご [1] => バナナ [2] => みかん )
```

連想配列に、新しいキーと値のペアを、追加するには、新しいキーを指定します。

```php
$user = [
    "name" => "山田 太郎",
];

// 新しいキーで要素を追加
$user["age"] = 30;

print_r($user); // Array ( [name] => 山田 太郎 [age] => 30 )
```

> **💡 `print_r()` とは？**
> `print_r()`は、配列や、オブジェクトの中身を、人間が、見やすい形で、出力してくれる、デバッグ用の関数です。配列の構造を、確認したい場合に、非常に便利です。

#### 更新

既存のキーを指定して、値を代入すると、その要素が、更新されます。

```php
$fruits = ["りんご", "バナナ", "みかん"];

// キー1の要素を更新
$fruits[1] = "ぶどう";

print_r($fruits); // Array ( [0] => りんご [1] => ぶどう [2] => みかん )
```

### 🗑️ 要素の削除

特定の要素を、削除するには、`unset()`関数を使います。

```php
$fruits = ["りんご", "バナナ", "みかん"];

// キー1の要素を削除
unset($fruits[1]);

print_r($fruits); // Array ( [0] => りんご [2] => みかん )
```

`unset()`で、要素を削除しても、インデックスは、自動的に、詰められません（歯抜けの状態になる）。

### 🔄 配列と`foreach`ループ

前のセクションで学んだ、`foreach`ループは、配列を、扱う上で、最強のパートナーです。配列の、全ての要素に対して、順番に、同じ処理を、簡単に行うことができます。

```php
$users = [
    ["name" => "山田", "age" => 30],
    ["name" => "佐藤", "age" => 25],
    ["name" => "鈴木", "age" => 35],
];

// ユーザー情報の配列をループ処理
foreach ($users as $user) {
    echo "名前: " . $user["name"] . "、年齢: " . $user["age"] . "歳<br>";
}
```

この例のように、連想配列を、さらに、配列に入れることで（多次元配列）、より、複雑なデータ構造も、表現することができます。これは、データベースから、複数のレコードを、取得した際の、典型的な、データ形式です。

---

## ✨ まとめ

このセクションでは、複数の値を、まとめて扱うための、配列について学びました。

*   **配列**: 複数の値を、一つの変数に、格納できる、データ構造。
*   **インデックス配列**: キーが、`0`から始まる、数値の配列。
*   **連想配列**: キーが、意味のある、文字列の配列。
*   **操作**: `変数名[キー]` で、要素にアクセスし、値の取得、追加、更新ができる。`unset()`で、削除できる。
*   **`foreach`との連携**: `foreach`ループを使うことで、配列の、全要素を、簡単に、処理できる。

配列は、PHPプログラミングの、あらゆる場面で、登場します。特に、連想配列と、`foreach`ループの組み合わせは、Laravelでの開発において、頻繁に使う、必須のパターンです。しっかりと、使い方を、マスターしておきましょう。

---
