# Tutorial 7-2-4: 繰り返し処理（for, foreach）

## 🎯 このセクションで学ぶこと

*   繰り返し処理（ループ）とは何か、その必要性を理解する。
*   `for`ループを使って、指定した回数だけ、処理を繰り返す方法を学ぶ。
*   `foreach`ループを使って、配列の各要素に対して、順番に、処理を実行する方法を学ぶ。
*   `break`と`continue`を使って、ループの処理を、制御する方法を理解する。

---

## 導入

もし、画面に「こんにちは」と、100回、表示したい場合、どうしますか？ `echo "こんにちは";` を、100行、コピー＆ペーストしますか？ もし、1000回だったら？ 考えるだけで、うんざりしますね。

プログラミングの、最も、強力な能力の一つは、**退屈な、反復作業を、自動化できること**です。この自動化を、実現するのが、**繰り返し処理（ループ）**です。

ループを使えば、「この処理を、10回繰り返して」「この配列の、全ての要素に対して、同じ処理をして」といった命令を、わずか数行のコードで、記述することができます。このセクションでは、PHPにおける、繰り返し処理の、代表的な、2つの構文、`for`ループと`foreach`ループについて、学んでいきます。

---

## 詳細解説

### 🔄 `for`ループ: 指定回数の繰り返し

`for`ループは、**特定の回数だけ、処理を繰り返したい**場合に、最も、一般的に使われる、ループ構文です。カウンターとして使う、変数を、用意し、その変数の値を、変化させながら、条件を満たす間、処理を繰り返します。

`for`文の `()` の中には、セミコロン（`;`）で区切られた、3つの式を記述します。

`for (初期化式; 条件式; 変化式)`

1.  **初期化式**: ループが始まる前に、一度だけ実行される。通常、カウンター変数の初期化を行う。（例: `$i = 0;`）
2.  **条件式**: 各ループの開始前に、評価される。この条件が`true`である限り、ループは続く。`false`になった時点で、ループは終了する。（例: `$i < 10;`）
3.  **変化式**: 各ループの処理が終わるたびに、実行される。通常、カウンター変数の値を、増減させる。（例: `$i++`）

```php
// 0から9まで、10回ループする
for ($i = 0; $i < 10; $i++) {
    echo $i . "回目のこんにちは！<br>";
}

// $i++ は、$i = $i + 1 と同じ意味（インクリメント）
```

この例では、
1.  最初に `$i` が `0` に初期化される。
2.  `$i < 10` が `true` なので、ループ内の処理が実行される。
3.  ループの最後に `$i` がインクリメントされ、`1` になる。
4.  `$i < 10` が `true` なので、再び、ループ内の処理が実行される。
5.  ...これを繰り返し、`$i` が `10` になった時点で、`$i < 10` が `false` となり、ループが終了する。

### 🎁 `foreach`ループ: 配列のための繰り返し

`foreach`ループは、**配列や、オブジェクトの、各要素に対して、順番に、処理を行いたい**場合に、特化した、非常に便利な、ループ構文です。`for`ループのように、カウンター変数を、管理する必要がなく、より、直感的に、記述することができます。

```php
$fruits = ["りんご", "バナナ", "みかん"];

// 配列 $fruits の各要素を、順番に、変数 $fruit に代入して、処理を繰り返す
foreach ($fruits as $fruit) {
    echo $fruit . "はおいしい！<br>";
}
```

`foreach ($array as $value)` の形式で、配列（`$array`）から、要素を一つずつ取り出し、変数（`$value`）に代入しながら、ループが実行されます。

キー（添字）も、同時に、取得したい場合は、以下のように記述します。

```php
$scores = [
    "国語" => 80,
    "数学" => 95,
    "英語" => 72,
];

// キーを $subject に、値を $score に代入してループ
foreach ($scores as $subject => $score) {
    echo $subject . "の点数は、" . $score . "点です。<br>";
}
```

Laravelでの、データベースから取得した、複数のレコードを、処理する場面などでは、この`foreach`ループが、頻繁に、登場します。

### 🚦 ループの制御 (`break` と `continue`)

ループの処理の途中で、その流れを、コントロールしたい場合があります。そのために、`break`と`continue`という、2つの命令が用意されています。

1.  **`break`**: `break`が実行された時点でループを**完全に終了**し、そのループの外側（直後）のコードへ処理が移ります。

    ```php
    // 1から10までループするが、5を見つけたら中断する
    for ($i = 1; $i <= 10; $i++) {
        if ($i === 5) {
            break; // ループを抜ける
        }
        echo $i . "<br>";
    }
    // 出力: 1, 2, 3, 4
    ```

2.  **`continue`**: 現在のループ処理を、**その場で中断**し、**次のループ処理**に、移ります。

    ```php
    // 1から10までループするが、偶数の場合はスキップする
    for ($i = 1; $i <= 10; $i++) {
        if ($i % 2 === 0) { // % は、余りを求める演算子
            continue; // 次のループへ
        }
        echo $i . "<br>";
    }
    // 出力: 1, 3, 5, 7, 9
    ```

---

## ✨ まとめ

このセクションでは、退屈な、反復作業を、自動化するための、繰り返し処理について学びました。

*   **ループ**: 同じ、または、似たような処理を、何度も、繰り返すための構文。
*   **`for`ループ**: **指定した回数**、処理を繰り返したい場合に使う。`for ($i = 0; $i < 10; $i++)` の形式を、覚える。
*   **`foreach`ループ**: **配列の、全要素**に対して、処理を行いたい場合に使う。`foreach ($array as $value)` の形式が、基本。
*   **`break`**: ループを、完全に、**中断**する。
*   **`continue`**: 現在のループを、**スキップ**して、次に進む。

ループは、条件分岐と並んで、プログラムの、流れを制御する、中心的な役割を担います。特に、`foreach`は、今後の、Laravelでの開発において、必須のツールとなるため、しっかりと、使い方を、マスターしておきましょう。

---
