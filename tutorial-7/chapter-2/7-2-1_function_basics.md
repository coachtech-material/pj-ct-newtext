# Tutorial 7-2-1: 関数の基礎

## 🎯 このセクションで学ぶこと

*   関数とは何か、その役割とメリット（コードの再利用）を理解する。
*   PHPで、独自の関数を定義し、呼び出す方法を学ぶ。
*   引数を使って、関数にデータを渡す方法を理解する。
*   `return`を使って、関数から処理結果を返す方法を理解する。

---

## 導入

プログラミングをしていると、「同じような処理を、何度も書いているな」と感じることが、よくあります。例えば、ユーザーの名前を受け取って、「こんにちは、〇〇さん！」という挨拶文を生成する処理が、プログラムの、あちこちに、登場するかもしれません。

このような場合に、同じコードを、何度も、コピー＆ペーストするのは、非常に、非効率的ですし、後で、挨拶の文言を、少し変えたくなった場合に、全ての箇所を、修正しなければならず、ミスも、起こりやすくなります。

この問題を、エレガントに解決してくれるのが、**関数 (Function)** です。関数とは、**一連の処理を、一つのまとまりとして、名前を付けたもの**です。一度、関数を定義しておけば、後は、その名前を呼び出すだけで、いつでも、どこでも、同じ処理を、実行することができます。

---

## 詳細解説

### 🛠️ 関数とは？

関数は、よく、**便利な道具**や、**レシピ**に例えられます。

*   **道具**: 例えば、「2つの数値を受け取って、その合計を計算する」という、`add`という名前の道具（関数）を作っておけば、`add(3, 5)`のように、呼び出すだけで、いつでも、合計値「8」を、得ることができます。
*   **レシピ**: 「カレーを作る」というレシピ（関数）があれば、材料（引数）さえ渡せば、誰が作っても、同じ手順で、同じカレー（戻り値）が、出来上がります。

関数を使うことには、大きなメリットがあります。

*   **再利用性 (Reusability)**: 同じ処理を、何度も書く必要がなくなり、コードが、簡潔になる。
*   **保守性 (Maintainability)**: 処理の修正が必要になった場合、関数の中身を、一箇所、修正するだけで済む。
*   **可読性 (Readable)**: 処理に、分かりやすい名前を付けることで、コードが、何をしているのか、理解しやすくなる。

### ✍️ 関数の定義と呼び出し

PHPで、独自の関数を定義するには、`function`キーワードを使います。

```php
// 関数の定義
function sayHello()
{
    echo "こんにちは！";
}

// 関数の呼び出し
sayHello(); // "こんにちは！" が出力される
sayHello(); // もう一度呼び出せる
```

*   **定義**: `function 関数名() { ... }` の形式で、関数を定義します。`{}` の中に、実行したい処理を記述します。
*   **呼び出し**: `関数名();` のように、関数名の後に、丸括弧 `()` を付けて、呼び出します。

### 🎁 引数 (Arguments)

引数（ひきすう）は、**関数に、外部から、データを渡すための仕組み**です。これにより、関数は、より、柔軟で、汎用的なものになります。

```php
// 引数 $name を受け取る関数
function sayHelloTo($name)
{
    echo "こんにちは、" . $name . "さん！";
}

// 関数を呼び出す際に、引数を渡す
sayHelloTo("山田"); // "こんにちは、山田さん！" が出力される
sayHelloTo("佐藤"); // "こんにちは、佐藤さん！" が出力される
```

*   **定義時**: `function 関数名($引数1, $引数2, ...)` のように、`()` の中に、受け取りたいデータを、変数として、定義します。この変数を、**仮引数 (Parameter)** と呼びます。
*   **呼び出し時**: `関数名(値1, 値2, ...)` のように、`()` の中に、渡したい具体的な値を、記述します。この値を、**実引数 (Argument)** と呼びます。

### 🚚 戻り値 (Return Value)

戻り値（もどりち）は、**関数の処理結果を、呼び出し元に、返すための仕組み**です。`return`キーワードを使います。

`echo`が、単に、画面に出力するだけなのに対し、`return`は、関数の実行結果を、値として、返すため、その結果を、別の変数に代入したり、さらに、別の計算に使ったりすることができます。

```php
// 2つの数値を受け取り、その合計を返す関数
function add($a, $b)
{
    $sum = $a + $b;
    return $sum; // 計算結果を返す
}

// 関数の戻り値を、変数 $result に代入する
$result = add(3, 5);

echo $result; // "8" が出力される

echo add(10, 20); // "30" が出力される
```

`return`が実行されると、その時点で、関数の処理は、即座に終了し、値が、呼び出し元に返されます。`return`より後に書かれたコードは、実行されません。

```php
function testReturn()
{
    return "ここで処理は終わり";
    echo "この行は実行されません";
}

echo testReturn();
```

---

## ✨ まとめ

このセクションでは、処理を、再利用可能な、まとまりとして定義する、関数について学びました。

*   **関数**: 一連の処理を、一つのまとまりとして、名前を付けたもの。**再利用性**、**保守性**、**可読性**を高める。
*   **定義**: `function 関数名() { ... }` で定義する。
*   **呼び出し**: `関数名();` で呼び出す。
*   **引数**: 関数に、外部から、データを渡すための仕組み。`function greet($name)` のように定義する。
*   **戻り値**: 関数の処理結果を、呼び出し元に返すための仕組み。`return $result;` のように記述する。

関数は、プログラミングの、基本的な、構成要素（ビルディングブロック）です。小さな、機能単位で、関数を作成し、それらを、組み合わせていくことで、複雑なプログラムも、見通し良く、構築することができます。

次のセクションでは、この関数を、より、安全で、堅牢なものにするための、「型宣言」について、学んでいきます。

---

## 📝 学習のポイント

- [ ] 関数を定義し、呼び出すことができる。
- [ ] 引数を使って、関数に、値を渡すことができる。
- [ ] `return`を使って、関数から、処理結果を返すことができる。
- [ ] 関数を使うことのメリット（再利用性など）を説明できる。
