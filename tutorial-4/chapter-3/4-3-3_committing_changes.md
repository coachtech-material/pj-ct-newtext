# Tutorial 4-3-3: 変更の記録 (git commit)

## 🎯 このセクションで学ぶこと

*   コミットの役割と、コミットメッセージの重要性を理解する。
*   `git commit` コマンドを使って、ステージングエリアにある変更を、リポジトリに記録する方法を学ぶ。
*   良いコミットメッセージを書くための基本的な作法を学ぶ。

---

## 導入

`git add` によって、あなたは「記録したい変更」をステージングエリアに準備しました。これは、歴史の教科書に載せるための、重要な出来事の草稿を書き上げたような状態です。

次に行うのは、その草稿を、**正式な歴史の一ページとして、永久に刻み込む**作業です。この、Gitにおける最も重要で中心的な行為を、**コミット (Commit)** と呼びます。そして、そのためのコマンドが `git commit` です。

コミットは、単に変更を保存するだけではありません。それぞれのコミットには、「**なぜ**、この変更を行ったのか」を説明するための、**コミットメッセージ**という、短い文章を添える必要があります。このメッセージこそが、未来のあなたや、チームの同僚が、過去の変更の意図を理解するための、唯一の手がかりとなります。

このセクションでは、あなたのプロジェクトの歴史における、記念すべき最初の1ページを刻みます。

---

## 詳細解説

### 📸 `git commit` で歴史を刻む

現在、`README.md` の新規作成という変更が、ステージングエリアに準備されています。これを、リポジトリにコミットしましょう。

`git commit` コマンドには、`-m` というオプションを付けて、その後に、コミットメッセージを文字列で指定するのが、最も簡単な方法です。

```bash
git commit -m "Initial commit"
```

*   `git commit`: コミットを実行するコマンド。
*   `-m`: "message" の略。続く文字列を、コミットメッセージとして使用することを指示するオプション。
*   `"Initial commit"`: コミットメッセージ。最初のコミットでは、慣習的に「Initial commit」や「First commit」というメッセージがよく使われます。

このコマンドを実行すると、Gitは以下のような応答を返します。

```
[main (root-commit) a1b2c3d] Initial commit
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
```

このメッセージが意味することは、

*   `[main (root-commit) a1b2c3d]`: `main` ブランチに、`a1b2c3d` というIDを持つ、最初のコミット（root-commit）が作成されたこと。
*   `Initial commit`: あなたが指定したコミットメッセージ。
*   `1 file changed, 1 insertion(+)`: 1つのファイルが変更され、1行が追加されたこと。
*   `create mode 100644 README.md`: `README.md` というファイルが、作成モードで記録されたこと。

です。これで、あなたの最初のコミットは、無事にリポジトリに記録されました。ステージングエリアは、再び空の状態に戻ります。

`git status` を実行して、現在の状態を確認してみましょう。

```bash
git status
```

```
On branch main
nothing to commit, working tree clean
```

「コミットするものは何もありません。ワーキングツリーはきれいです」というメッセージが表示されます。これは、ワーキングディレクトリ、ステージングエリア、そして最新のコミットの状態が、全て一致している、最も安定した状態であることを意味します。

### ✍️ コミットメッセージの重要性

今回のコミットメッセージは `"Initial commit"` という、非常にシンプルなものでした。しかし、実際の開発では、このコミットメッセージが、非常に重要な役割を果たします。

良いコミットメッセージは、以下の問いに答えるべきです。

*   **何を変更したのか？ (What)**
*   **なぜ、その変更が必要だったのか？ (Why)**

例えば、`"Fix bug"` のような、曖昧なメッセージは、悪い例です。これでは、未来の自分や他の人が見ても、何のバグを、どのように修正したのか、全く分かりません。

良いコミットメッセージは、具体的で、かつ簡潔であるべきです。一般的に、以下のような形式が推奨されています。

1.  **1行目: 変更の要約 (50文字以内)**
    *   変更内容が一目で分かるように、動詞の原形から始める命令形で書く。（例: `Add`, `Fix`, `Refactor`, `Update`）
    *   例: `Fix login button layout issue on mobile` （モバイルでのログインボタンのレイアウト問題を修正）

2.  **2行目: 空白行**

3.  **3行目以降: 変更の具体的な理由や背景**
    *   なぜ、この変更が必要だったのか、どのような問題点を解決したのかを、詳しく記述する。

この作法に従うことで、誰が見ても変更の意図が理解しやすい、質の高い変更履歴を、チームで維持することができます。

> **今は理解しなくてOK**: 最初から完璧なコミットメッセージを書くのは難しいです。まずは、「**未来の自分が読んでも分かるように書く**」という意識を持つことから始めましょう。プロジェクトが進むにつれて、良いメッセージの書き方は、自然と身についていきます。

---

## ✨ まとめ

このセクションでは、`git commit` コマンドを使って、プロジェクトの変更履歴を記録する方法を学びました。

*   **コミットとは**: プロジェクトのある時点での状態を、スナップショットとして、リポジトリに永久に記録する行為。
*   **`git commit -m "メッセージ"`**: ステージングエリアにある全ての変更を、指定したメッセージと共に、リポジトリにコミットするコマンド。
*   **コミットメッセージ**: 「何を変更したか」だけでなく、「なぜ変更したか」を、明確に記述することが非常に重要。
*   **`git status`**: コミット後、ワーキングツリーが「clean」な状態になることを確認する。

あなたは今、Gitの最も基本的なワークフローである、「`add` して `commit` する」というサイクルを、初めて完了しました。おめでとうございます！

今後の開発は、基本的に、以下のサイクルの繰り返しになります。

1.  ファイルを編集する。（ワーキングディレクトリ）
2.  `git add` で、記録したい変更をステージングする。（ステージングエリア）
3.  `git commit` で、変更をリポジトリに記録する。（リポジトリ）

次のセクションでは、これまで記録してきたコミットの履歴を、確認する方法を学びます。

---
