# Tutorial 4-3-2: ファイルの追加 (git add)

## 🎯 このセクションで学ぶこと

*   Gitにおける「ステージングエリア」という重要な概念を理解する。
*   `git add` コマンドを使って、ファイルの変更をステージングエリアに追加する方法を学ぶ。
*   `git status` コマンドを使って、ファイルの現在の状態を確認する方法を学ぶ。

---

## 導入

前のセクションで、あなたは `git init` を使って、プロジェクトの「保管庫」であるリポジトリを作成しました。これで、Gitはあなたのプロジェクトフォルダを監視する準備ができました。

次にやることは、この保管庫に「**何を**」保存したいのかを、Gitに具体的に指示することです。プロジェクトフォルダの中には、一時的なメモファイルや、自動生成されるファイルなど、バージョン管理に含めたくないファイルも存在するかもしれません。Gitは、あなたが明示的に「この変更を記録して」と指示したものだけを、記録の対象とします。

この「記録したい変更を、一時的に置いておく場所」のことを、Gitでは **ステージングエリア (Staging Area)** と呼びます。そして、ファイルの変更を、このステージングエリアに追加するコマンドが、`git add` です。

`git add` は、これからあなたが、おそらく最も頻繁に使うことになるGitコマンドの一つです。その役割を、正確に理解しましょう。

---

## 詳細解説

### 📖 3つのエリアの物語

`git add` を理解するためには、Gitがファイルをどのように管理しているか、その全体像を知る必要があります。Gitには、主に3つの「エリア（場所）」が存在します。

1.  **ワーキングディレクトリ (Working Directory)**
    *   あなたが今、実際にファイルを見たり、編集したりしている、プロジェクトのフォルダそのものです。いわば、あなたの「作業机」です。

2.  **ステージングエリア (Staging Area)**
    *   次のコミット（記録）に含めたい変更を、一時的に置いておく場所です。「記録の準備ができた変更」を、このエリアに集めます。しばしば、「インデックス (Index)」とも呼ばれます。これは、写真を撮る前に、被写体をフレームに収める行為に似ています。

3.  **Gitリポジトリ (Git Repository)**
    *   ステージングエリアにある変更が、`git commit` コマンドによって、永久に記録・保存される場所です。`.git` ディレクトリの中に存在します。一度ここに記録されたものは、基本的には失われません。

バージョン管理の基本的な流れは、この3つのエリアを、変更が移動していくプロセスです。

`作業机 (ワーキングディレクトリ) で変更` → `フレームに収める (ステージングエリアに add)` → `シャッターを切る (リポジトリに commit)`

### 📝 最初のファイルを作成する

それでは、実際にファイルを変更し、`git add` を使ってステージングエリアに追加してみましょう。

まず、`my-first-git` ディレクトリの中に、`README.md` という名前のファイルを、新しく作成します。このファイルは、プロジェクトの概要を説明するための、慣習的によく使われるファイルです。

```bash
# "# My First Git Project" という内容で、README.md ファイルを作成
echo "# My First Git Project" > README.md
```

`ls` コマンドで、ファイルが作成されたことを確認してください。

### ❓ `git status` で状態を確認する

ここで、非常に便利なコマンド `git status` を使って、Gitが現在の状況をどう認識しているか、尋ねてみましょう。

```bash
git status
```

すると、Gitは以下のように答えてくれます。

```
On branch main

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        README.md

nothing added to commit but untracked files present (use "git add" to track)
```

このメッセージは、非常に重要な情報を含んでいます。

*   `No commits yet`: 「まだ一度もコミットがありません」
*   `Untracked files`: 「追跡されていないファイルがあります」
*   `README.md`: 具体的なファイル名を教えてくれています。
*   `(use "git add <file>..." to include in what will be committed)`: 「コミットに含めるには、`git add` を使ってください」と、親切に次の操作を教えてくれています。

「追跡されていない (Untracked)」とは、そのファイルが新しく作成されたばかりで、まだ一度もGitの管理下に置かれていない、という状態を意味します。

### ➕ `git add` でステージングする

それでは、Gitの指示に従って、`README.md` をステージングエリアに追加しましょう。

```bash
git add README.md
```

何もメッセージが表示されませんが、これで `README.md` に加えられた変更（この場合は、ファイルの新規作成）が、ステージングエリアに移動しました。

もう一度、`git status` を実行して、状況の変化を確認してみましょう。

```bash
git status
```

今度は、Gitの応答が変わりました。

```
On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   README.md
```

*   `Changes to be committed`: 「コミットされるべき変更があります」
*   `new file:   README.md`: `README.md` という新しいファイルが、その対象であることを示しています。

注目すべきは、`Untracked files` というセクションが消え、代わりに `Changes to be committed` というセクションに `README.md` が表示されていることです。これは、`README.md` が、ワーキングディレクトリからステージングエリアへと、正しく移動したことを意味します。

これで、次のコミットの準備が整いました。

---

## ✨ まとめ

このセクションでは、`git add` コマンドと、その背景にある「ステージングエリア」という重要な概念について学びました。

*   **3つのエリア**: Gitは、**ワーキングディレクトリ**、**ステージングエリア**、**Gitリポジトリ** という3つのエリアでファイルの変更を管理する。
*   **ステージングエリア**: 次のコミットに含めたい変更を、一時的に準備しておく場所。
*   **`git add <ファイル名>`**: 指定したファイルの変更を、ワーキングディレクトリからステージングエリアに追加するコマンド。
*   **`git status`**: リポジトリの現在の状態（どのファイルが変更され、どのエリアにあるか）を確認するための、非常に重要なコマンド。

なぜ、わざわざステージングエリアのような、ワンクッションを置く必要があるのでしょうか？それは、**コミットに含める変更を、自分で柔軟に選びたい**からです。例えば、3つのファイルを同時に変更したけれど、今回のコミットには、そのうちの2つの変更だけを含めたい、といった場合に、ステージングエリアは非常に役立ちます。

次のセクションでは、いよいよ、ステージングエリアに準備した変更を、`git commit` コマンドを使って、リポジトリに永久に記録します。

---
