# Tutorial 11-2-5: ã‚¿ã‚¹ã‚¯ç·¨é›†ã®å®Ÿè£…

## ğŸ¯ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å­¦ã¶ã“ã¨

- ã‚¿ã‚¹ã‚¯ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶
- æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶
- ã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶

---

## ğŸ§  å…ˆè¼©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹

### ã€Œãªãœã€è©³ç´°è¡¨ç¤ºã€ã®æ¬¡ã«ã€ç·¨é›†ã€ã‚’å®Ÿè£…ã™ã‚‹ã®ã‹ï¼Ÿã€

è©³ç´°è¡¨ç¤ºãŒã§ããŸã‚‰ã€æ¬¡ã¯ã€Œç·¨é›†ã€æ©Ÿèƒ½ã§ã™ã€‚ãªãœã€Œå‰Šé™¤ã€ã§ã¯ãªã„ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ

---

### ç†ç”±1: ã€Œä½œæˆã€ã¨ã€Œè©³ç´°ã€ã®çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ã‚‹

ã€Œç·¨é›†ã€æ©Ÿèƒ½ã¯ã€**ã€Œä½œæˆã€ã¨ã€Œè©³ç´°ã€ã®çµ„ã¿åˆã‚ã›**ã§ã™ã€‚

- **ã€Œä½œæˆã€ã‹ã‚‰**: ãƒ•ã‚©ãƒ¼ãƒ ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¿å­˜å‡¦ç†
- **ã€Œè©³ç´°ã€ã‹ã‚‰**: IDã§1ä»¶å–å¾—ã€ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

ã“ã‚Œã¾ã§ã®çŸ¥è­˜ã‚’æ´»ã‹ã›ã‚‹ã®ã§ã€ã‚¹ãƒ ãƒ¼ã‚ºã«å®Ÿè£…ã§ãã¾ã™ã€‚

---

### ç†ç”±2: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºãŒå¿…è¦

ç·¨é›†ç”»é¢ã§ã¯ã€**ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤º**ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```php
// ç·¨é›†ç”»é¢ï¼šæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤º
$task = Task::findOrFail($id);
return view('tasks.edit', compact('task'));
```

ã“ã‚Œã¯ã€Œè©³ç´°è¡¨ç¤ºã€ã§å­¦ã‚“ã çŸ¥è­˜ã‚’å¿œç”¨ã—ã¦ã„ã¾ã™ã€‚

---

### ç†ç”±3: HTTPãƒ¡ã‚½ãƒƒãƒ‰ã®é•ã„ã‚’å­¦ã¶

ã€Œä½œæˆã€ã¨ã€Œç·¨é›†ã€ã§ã¯ã€HTTPãƒ¡ã‚½ãƒƒãƒ‰ãŒç•°ãªã‚Šã¾ã™ã€‚

| æ©Ÿèƒ½ | HTTPãƒ¡ã‚½ãƒƒãƒ‰ | ç†ç”± |
|------|-------------|------|
| ä½œæˆ | POST | æ–°ã—ã„ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã‚‹ |
| ç·¨é›† | PUT/PATCH | æ—¢å­˜ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æ›´æ–°ã™ã‚‹ |

Laravelã§ã¯Bladeã§`@method('PUT')`ã‚’ä½¿ã£ã¦ã€PUTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚

---

### ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã‚„ã‚‹ã“ã¨

| é †ç•ª | ä½œæ¥­ | ç†ç”± |
|------|------|------|
| Step 1 | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¿½åŠ  | edit()ã¨update()ã®2ã¤ã®ãƒ«ãƒ¼ãƒˆ |
| Step 2 | editãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£… | æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤º |
| Step 3 | ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ãƒ¥ãƒ¼ä½œæˆ | æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ãŸãƒ•ã‚©ãƒ¼ãƒ  |
| Step 4 | updateãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£… | ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ |
| Step 5 | è©³ç´°ãƒšãƒ¼ã‚¸ã«ç·¨é›†ãƒªãƒ³ã‚¯ã‚’è¿½åŠ  | ç·¨é›†ãƒšãƒ¼ã‚¸ã¸ã®å°ç·šã‚’ä½œã‚‹ |
| Step 6 | å‹•ä½œç¢ºèª | æ­£ã—ãå‹•ä½œã™ã‚‹ã‹ç¢ºèªã™ã‚‹ |

> ğŸ’¡ **ãƒã‚¤ãƒ³ãƒˆ**: ã€Œä½œæˆã€ã¨ã®é•ã„ã¯ã€â‘ æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã€â‘¡HTTPãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆPUTï¼‰ã€â‘¢æ›´æ–°å‡¦ç†ã®3ç‚¹ã§ã™ã€‚

---

## Step 1: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¿½åŠ 

### 1-1. ç·¨é›†ç”¨ã®ãƒ«ãƒ¼ãƒˆã‚’å®šç¾©ã™ã‚‹

ã‚¿ã‚¹ã‚¯ç·¨é›†ã«ã¯2ã¤ã®ãƒ«ãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `routes/web.php`

```php
Route::middleware(['auth'])->group(function () {
    Route::get('/tasks', [TaskController::class, 'index'])->name('tasks.index');
    Route::get('/tasks/create', [TaskController::class, 'create'])->name('tasks.create');
    Route::post('/tasks', [TaskController::class, 'store'])->name('tasks.store');
    Route::get('/tasks/{task}', [TaskController::class, 'show'])->name('tasks.show');
    Route::get('/tasks/{task}/edit', [TaskController::class, 'edit'])->name('tasks.edit');
    Route::put('/tasks/{task}', [TaskController::class, 'update'])->name('tasks.update');
});
```

---

### 1-2. ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### `Route::get('/tasks/{task}/edit', ...)->name('tasks.edit')`

- `GET /tasks/1/edit`ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€`edit`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™
- ã“ã®ãƒ«ãƒ¼ãƒˆã¯**ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹**ãŸã‚ã®ã‚‚ã®ã§ã™

---

#### `Route::put('/tasks/{task}', ...)->name('tasks.update')`

- `PUT /tasks/1`ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã¨ã€`update`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¾ã™
- ã“ã®ãƒ«ãƒ¼ãƒˆã¯**ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹**ãŸã‚ã®ã‚‚ã®ã§ã™

---

#### ä½œæˆã¨ç·¨é›†ã®æ¯”è¼ƒ

| æ©Ÿèƒ½ | ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º | ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
|------|-------------|-----------|
| ä½œæˆ | GET `/tasks/create` | POST `/tasks` |
| ç·¨é›† | GET `/tasks/{task}/edit` | PUT `/tasks/{task}` |

---

## Step 2: editãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…

### 2-1. ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹

ã‚¿ã‚¹ã‚¯ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹`edit`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/Http/Controllers/TaskController.php`

```php
public function edit(Task $task)
{
    // èªå¯ãƒã‚§ãƒƒã‚¯ï¼šãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‹ã©ã†ã‹
    if ($task->user_id !== auth()->id()) {
        abort(403, 'ã“ã®ã‚¿ã‚¹ã‚¯ã‚’ç·¨é›†ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
    }

    return view('tasks.edit', compact('task'));
}
```

---

### 2-2. ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### `edit(Task $task)`

- ãƒ«ãƒ¼ãƒˆãƒ¢ãƒ‡ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§ã€URLã®IDã‹ã‚‰è‡ªå‹•çš„ã«ã‚¿ã‚¹ã‚¯ã‚’å–å¾—ã—ã¾ã™
- å–å¾—ã—ãŸã‚¿ã‚¹ã‚¯ã‚’ãƒ“ãƒ¥ãƒ¼ã«æ¸¡ã—ã¾ã™

---

#### èªå¯ãƒã‚§ãƒƒã‚¯

- `show`ãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒæ§˜ã«ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™
- ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‚’ç·¨é›†ã§ããªã„ã‚ˆã†ã«ã—ã¾ã™

---

## Step 3: ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ãƒ¥ãƒ¼ä½œæˆ

### 3-1. ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹

ã‚¿ã‚¹ã‚¯ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `resources/views/tasks/edit.blade.php`

```blade
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¿ã‚¹ã‚¯ç·¨é›†</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"],
        input[type="date"],
        textarea,
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .error {
            color: red;
            margin-bottom: 15px;
        }
        button {
            background-color: #2196f3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .cancel-link {
            margin-left: 10px;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>ã‚¿ã‚¹ã‚¯ç·¨é›†</h1>

    @if ($errors->any())
        <div class="error">
            <ul>
                @foreach ($errors->all() as $error)
                    <li>{{ $error }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <form method="POST" action="{{ route('tasks.update', $task) }}">
        @csrf
        @method('PUT')

        <div class="form-group">
            <label for="title">ã‚¿ã‚¤ãƒˆãƒ«</label>
            <input type="text" id="title" name="title" value="{{ old('title', $task->title) }}" required>
        </div>

        <div class="form-group">
            <label for="description">èª¬æ˜</label>
            <textarea id="description" name="description" rows="4">{{ old('description', $task->description) }}</textarea>
        </div>

        <div class="form-group">
            <label for="due_date">æœŸé™</label>
            <input type="date" id="due_date" name="due_date" value="{{ old('due_date', $task->due_date?->format('Y-m-d')) }}">
        </div>

        <div class="form-group">
            <label for="status">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
            <select id="status" name="status">
                <option value="pending" {{ old('status', $task->status) == 'pending' ? 'selected' : '' }}>æœªç€æ‰‹</option>
                <option value="in_progress" {{ old('status', $task->status) == 'in_progress' ? 'selected' : '' }}>é€²è¡Œä¸­</option>
                <option value="completed" {{ old('status', $task->status) == 'completed' ? 'selected' : '' }}>å®Œäº†</option>
            </select>
        </div>

        <button type="submit">æ›´æ–°</button>
        <a href="{{ route('tasks.show', $task) }}" class="cancel-link">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</a>
    </form>
</body>
</html>
```

---

### 3-2. ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### `@method('PUT')`

- HTMLãƒ•ã‚©ãƒ¼ãƒ ã¯ã€`GET`ã¨`POST`ã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“
- `@method('PUT')`ã‚’è¿½åŠ ã™ã‚‹ã¨ã€Laravelã¯`POST`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’`PUT`ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ã—ã¦æ‰±ã„ã¾ã™
- ã“ã‚Œã«ã‚ˆã‚Šã€RESTfulãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ã§ãã¾ã™

---

#### `old('title', $task->title)`

- `old()`é–¢æ•°ã®ç¬¬2å¼•æ•°ã¯**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤**ã§ã™
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆ: `old('title')`ãŒè¿”ã•ã‚Œã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸå€¤ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒãªã„å ´åˆ: `$task->title`ãŒè¿”ã•ã‚Œã‚‹ï¼ˆæ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ï¼‰

---

#### `$task->due_date?->format('Y-m-d')`

- `?->`ã¯**Nullã‚»ãƒ¼ãƒ•æ¼”ç®—å­**ã§ã™
- `due_date`ãŒNULLã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãšã«NULLã‚’è¿”ã—ã¾ã™
- `<input type="date">`ã«ã¯`Y-m-d`å½¢å¼ã®å€¤ãŒå¿…è¦ã§ã™

---

## Step 4: updateãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…

### 4-1. ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹

ã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã™ã‚‹`update`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/Http/Controllers/TaskController.php`

```php
public function update(Request $request, Task $task)
{
    // èªå¯ãƒã‚§ãƒƒã‚¯ï¼šãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‹ã©ã†ã‹
    if ($task->user_id !== auth()->id()) {
        abort(403, 'ã“ã®ã‚¿ã‚¹ã‚¯ã‚’ç·¨é›†ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚');
    }

    $validated = $request->validate([
        'title' => 'required|string|max:255',
        'description' => 'nullable|string',
        'due_date' => 'nullable|date',
        'status' => 'required|in:pending,in_progress,completed',
    ]);

    $task->update($validated);

    return redirect()->route('tasks.show', $task)->with('success', 'ã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚');
}
```

---

### 4-2. ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### `update(Request $request, Task $task)`

- ç¬¬1å¼•æ•°`$request`ã§ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã¾ã™
- ç¬¬2å¼•æ•°`$task`ã§ãƒ«ãƒ¼ãƒˆãƒ¢ãƒ‡ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«ã‚ˆã‚Šå¯¾è±¡ã®ã‚¿ã‚¹ã‚¯ã‚’å–å¾—ã—ã¾ã™

---

#### `$task->update($validated)`

- `update()`ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ¢ãƒ‡ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¾ã™
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ¸ˆã¿ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’æ›´æ–°ã™ã‚‹ã®ã§ã€å®‰å…¨ã§ã™

---

#### `store()`ã¨`update()`ã®é•ã„

| ãƒ¡ã‚½ãƒƒãƒ‰ | å‡¦ç† |
|---------|------|
| `store()` | `Task::create($validated)` - æ–°è¦ä½œæˆ |
| `update()` | `$task->update($validated)` - æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–° |

---

## Step 5: è©³ç´°ãƒšãƒ¼ã‚¸ã«ç·¨é›†ãƒªãƒ³ã‚¯ã‚’è¿½åŠ 

### 5-1. ç·¨é›†ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã™ã‚‹

ã‚¿ã‚¹ã‚¯è©³ç´°ãƒšãƒ¼ã‚¸ã«ã€ç·¨é›†ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã—ã¾ã™ã€‚

**ãƒ•ã‚¡ã‚¤ãƒ«**: `resources/views/tasks/show.blade.php`

ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸‹ã«ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```blade
@if (session('success'))
    <div style="color: green; margin-bottom: 15px; padding: 10px; background-color: #e8f5e9; border-radius: 4px;">
        {{ session('success') }}
    </div>
@endif

<!-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®å¾Œã«è¿½åŠ  -->
<div style="margin-top: 20px;">
    <a href="{{ route('tasks.edit', $task) }}" style="display: inline-block; padding: 10px 20px; background-color: #2196f3; color: white; text-decoration: none; border-radius: 4px;">ç·¨é›†</a>
    <a href="{{ route('tasks.index') }}" style="margin-left: 10px; color: #666;">â† ä¸€è¦§ã«æˆ»ã‚‹</a>
</div>
```

---

### 5-2. ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

#### `route('tasks.edit', $task)`

- `tasks.edit`ã¨ã„ã†åå‰ã®ãƒ«ãƒ¼ãƒˆã«URLã‚’ç”Ÿæˆã—ã¾ã™
- çµæœ: `/tasks/1/edit`ã®ã‚ˆã†ãªURLãŒç”Ÿæˆã•ã‚Œã¾ã™

---

## Step 6: å‹•ä½œç¢ºèª

### 6-1. ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤ºã™ã‚‹

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¿ã‚¹ã‚¯è©³ç´°ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
2. ã€Œç·¨é›†ã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
3. ã‚¿ã‚¹ã‚¯ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã€æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

---

### 6-2. ã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã™ã‚‹

1. ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã€Œæ›´æ–°ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã€ã«å¤‰æ›´
2. ã€Œæ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¿ã‚¹ã‚¯è©³ç´°ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹
4. ã€Œã‚¿ã‚¹ã‚¯ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
5. ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œæ›´æ–°ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã€ã«å¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

---

### 6-3. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèªã™ã‚‹

1. ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç©ºã«ã—ã¦ã€Œæ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å€¤ãŒä¿æŒã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

---

## ğŸš¨ ã‚ˆãã‚ã‚‹é–“é•ã„

### é–“é•ã„1: @method('PUT')ã‚’å¿˜ã‚Œã‚‹

**ã‚¨ãƒ©ãƒ¼**:

```
The PUT method is not supported for route tasks/{task}. Supported methods: GET, HEAD, POST.
```

**å¯¾å‡¦æ³•**: ãƒ•ã‚©ãƒ¼ãƒ ã«`@method('PUT')`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

---

### é–“é•ã„2: old()ã®ç¬¬2å¼•æ•°ã‚’å¿˜ã‚Œã‚‹

**å•é¡Œ**: ç·¨é›†ç”»é¢ã‚’é–‹ã„ãŸã¨ãã€ãƒ•ã‚©ãƒ¼ãƒ ãŒç©ºã«ãªã‚‹

**å¯¾å‡¦æ³•**: `old('title', $task->title)`ã®ã‚ˆã†ã«ã€ç¬¬2å¼•æ•°ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒ‡å®šã—ã¾ã™ã€‚

---

### é–“é•ã„3: èªå¯ãƒã‚§ãƒƒã‚¯ã‚’å¿˜ã‚Œã‚‹

**å•é¡Œ**: ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¹ã‚¯ã‚’ç·¨é›†ã§ãã¦ã—ã¾ã†

**å¯¾å‡¦æ³•**: `edit`ãƒ¡ã‚½ãƒƒãƒ‰ã¨`update`ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸¡æ–¹ã§ã€èªå¯ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã¾ã™ã€‚

---

## ğŸ’¡ TIP: fill()ãƒ¡ã‚½ãƒƒãƒ‰

`update()`ãƒ¡ã‚½ãƒƒãƒ‰ã®ä»£ã‚ã‚Šã«ã€`fill()`ãƒ¡ã‚½ãƒƒãƒ‰ã¨`save()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

```php
$task->fill($validated);
$task->save();
```

`fill()`ã¯å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã ã‘ã§ã€`save()`ã‚’å‘¼ã¶ã¾ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚

---

## âœ¨ ã¾ã¨ã‚

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚¿ã‚¹ã‚¯ç·¨é›†æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

| Step | å­¦ã‚“ã ã“ã¨ |
|------|-----------|
| Step 1 | ç·¨é›†æ©Ÿèƒ½ã«ã¯2ã¤ã®ãƒ«ãƒ¼ãƒˆï¼ˆGET/PUTï¼‰ãŒå¿…è¦ |
| Step 2 | `edit`ãƒ¡ã‚½ãƒƒãƒ‰ã§æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒ•ã‚©ãƒ¼ãƒ ã«è¡¨ç¤º |
| Step 3 | `@method('PUT')`ã§HTTPãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ‡å®š |
| Step 4 | `$task->update()`ã§ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–° |
| Step 5 | è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰ç·¨é›†ãƒšãƒ¼ã‚¸ã¸ã®å°ç·šã‚’ä½œã‚‹ |
| Step 6 | å‹•ä½œç¢ºèªã¨ã‚¨ãƒ©ãƒ¼ç¢ºèªã®æ–¹æ³• |

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚¿ã‚¹ã‚¯å‰Šé™¤ã®å®Ÿè£…ã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚

---
