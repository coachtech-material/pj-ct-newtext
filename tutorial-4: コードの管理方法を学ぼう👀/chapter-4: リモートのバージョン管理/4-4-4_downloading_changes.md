# Tutorial 4-4-4: 変更のダウンロード (git pull)

## 🎯 このセクションで学ぶこと

*   チーム開発において、他のメンバーの変更を、自分のローカルリポジトリに取り込む必要性を理解する。
*   `git pull` コマンドを使って、リモートリポジトリの最新の変更を、ローカルリポジトリにダウンロードし、統合する方法を学ぶ。
*   `git pull origin main` というコマンドの、各部分が何を意味するのかを理解する。

---

## 導入

前のセクションで、あなたは `git push` を使って、自分の変更をリモートリポジトリにアップロードしました。これにより、チームの他のメンバーも、あなたの作業内容を見ることができるようになりました。

では、逆に、**チームの他のメンバーが `push` した変更**を、あなたのローカルリポジトリに取り込むには、どうすればよいでしょうか？

あなたが寝ている間に、地球の裏側にいるチームメイトが、素晴らしい新機能を追加して、リモートリポジトリに `push` したとします。朝、あなたが作業を始めようとした時、あなたのローカルリポジトリは、まだ古い状態のままです。このままでは、チームメイトの変更を知らずに、古いコードを元に作業を進めてしまうことになり、後で大きな問題（コンフリクト）を引き起こす原因となります。

そこで必要になるのが、リモートリポジトリの最新の状態を、自分のローカルリポジトリに**引っ張ってくる (Pull)** という操作です。そして、そのためのコマンドが `git pull` です。

---

## 詳細解説

### 📥 `git pull` で最新の状態に更新する

リモートの変更を、ローカルに取り込むための基本的なコマンドは、以下の形式です。

```bash
git pull <リモート名> <ブランチ名>
```

*   `git pull`: リモートの変更を、ローカルに引っ張ってくる、という宣言。
*   `<リモート名>`: どのリモートリポジトリから引っ張ってくるかを指定します。通常は `origin` です。
*   `<ブランチ名>`: どの「歴史の流れ（ブランチ）」を引っ張ってくるかを指定します。通常は `main` です。

このコマンドは、実は、内部的に2つの操作を連続して行っています。

1.  **`git fetch`**: リモートリポジトリの最新の履歴情報を、ローカルにダウンロードしてくる。ただし、この段階では、まだあなたのワーキングディレクトリのファイルは、一切変更されません。ただ、リモートがどんな状態になっているか、という情報だけを取得します。
2.  **`git merge`**: `fetch` したリモートの変更履歴を、現在のローカルのブランチに、統合（マージ）する。この時点で、初めて、あなたの手元のファイルが、リモートの状態に合わせて更新されます。

> **今は理解しなくてOK**: `fetch` と `merge` の違いは、少し高度なトピックです。最初のうちは、**`git pull` は、リモートの最新版を、自分の手元に反映させるためのコマンド**、と覚えておけば十分です。

### 実行してみよう（擬似的な状況設定）

現在、あなたのローカルリポジトリと、リモートリポジトリは、全く同じ状態なので、`git pull` を実行しても、何も起こりません。「Already up to date. (すでに最新です)」と表示されるだけです。

そこで、チームの他のメンバーが、リモートリポジトリを更新した、という状況を、擬似的に作り出してみましょう。

1.  **GitHub上でファイルを編集する**: GitHubのリモートリポジトリのページ（`https://github.com/your-name/my-first-git`）を開きます。
2.  `README.md` ファイルをクリックします。
3.  ファイル表示画面の右上にある、鉛筆の形をした「Edit this file」アイコンをクリックします。

    <!-- ここにスクリーンショットを挿入: GitHub上でREADME.mdを編集する鉛筆アイコン -->

4.  エディタが開くので、ファイルの末尾に、何か新しい行を追加します。例えば、「`Edited on GitHub.`」と入力します。
5.  ページの下部にある「Commit changes」セクションで、コミットメッセージ（例: `Update README.md from GitHub`）を入力し、緑色の「Commit changes」ボタンを押します。

これで、リモートリポジトリは、あなたのローカルリポジトリよりも、1コミット分、先に進んだ状態になりました。この変更は、まだあなたのローカルPCには存在しません。

### ローカルに変更を取り込む

いよいよ、`git pull` の出番です。ターミナルで、`my-first-git` ディレクトリの中にいることを確認し、以下のコマンドを実行してください。

```bash
git pull origin main
```

成功すると、Gitは以下のようなメッセージを返します。

```
remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), 296 bytes | 296.00 KiB/s, done.
From https://github.com/your-name/my-first-git
   a1b2c3d..e4f5a6b  main       -> origin/main
Updating a1b2c3d..e4f5a6b
Fast-forward
 README.md | 1 +
 1 file changed, 1 insertion(+)
```

このメッセージは、リモートから新しいオブジェクトをダウンロードし、`README.md` ファイルが1行追加されて更新されたことを示しています。

さあ、あなたのローカルの `README.md` ファイルの中身を確認してみてください。VSCodeで開くか、`cat README.md` コマンドを実行します。GitHub上で追加した「`Edited on GitHub.`」という行が、ちゃんと反映されているはずです！

また、`git log --oneline` を実行すると、GitHub上で作成されたコミットも、ローカルの歴史に、正しく追加されていることが確認できます。

---

## ✨ まとめ

このセクションでは、`git pull` コマンドを使って、リモートリポジトリの変更を、ローカルリポジトリに取り込む方法を学びました。

*   **目的**: チームの他のメンバーが行った変更を、自分のローカル環境に反映させ、常に最新の状態で作業を進めるため。
*   **コマンド**: `git pull <リモート名> <ブランチ名>`
*   **具体的なコマンド**: `git pull origin main` （`origin` の `main` ブランチの最新の状態を、現在のブランチに引っ張ってくる）
*   **ワークフロー**: 作業を始める前には、まず `git pull` を実行して、リモートの変更を取り込む習慣をつけることが、チーム開発では非常に重要。

`push`（押し出す）と `pull`（引っ張る）。この2つのコマンドが、あなたとチームを繋ぐ、基本的なコミュニケーション手段となります。

これで、GitとGitHubの最も基本的なワークフローを一通り体験しました。おめでとうございます！

---
