# Tutorial 4-3-2: ファイルの追加 (git add)

## 🎯 このセクションで学ぶこと

*   `git add` コマンドを使って、ファイルの変更をステージングエリアに追加する方法を学ぶ。
*   `git status` コマンドを使って、ファイルの現在の状態を簡単に確認する方法を学ぶ。

---

## 導入

前のセクションで、あなたは `git init` を使って、プロジェクトの「保管庫」であるリポジトリを作成しました。これで、Gitはあなたのプロジェクトフォルダを監視する準備ができました。

次にやることは、この保管庫に「**何を**」保存したいのかを、Gitに具体的に指示することです。プロジェクトフォルダの中には、一時的なメモファイルや、自動生成されるファイルなど、バージョン管理に含めたくないファイルも存在するかもしれません。Gitは、あなたが明示的に「この変更を記録して」と指示したものだけを、記録の対象とします。

Tutorial 4-1-2で学んだ「3つのエリア」を思い出してください。「記録したい変更を、一時的に置いておく場所」が **ステージングエリア (Staging Area)** でした。そして、ファイルの変更を、このステージングエリアに追加するコマンドが、`git add` です。

`git add` は、これからあなたが、おそらく最も頻繁に使うことになるGitコマンドの一つです。その役割を、正確に理解しましょう。

---

## 詳細解説

### 📝 最初のファイルを作成する

それでは、実際にファイルを作成し、`git add` を使ってステージングエリアに追加してみましょう。

まず、`my-first-git` ディレクトリの中に、`README.md` という名前のファイルを、新しく作成します。このファイルは、プロジェクトの概要を説明するための、慣習的によく使われるファイルです。

```bash
# "# My First Git Project" という内容で、README.md ファイルを作成
echo "# My First Git Project" > README.md
```

`ls` コマンドで、ファイルが作成されたことを確認してください。

### ❓ `git status` で状態を確認する

ここで、非常に便利なコマンド `git status` を使って、Gitが現在の状況をどう認識しているか、尋ねてみましょう。

```bash
git status
```

すると、Gitは以下のように答えてくれます。

```
On branch main

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        README.md

nothing added to commit but untracked files present (use "git add" to track)
```

このメッセージは、`README.md` というファイルが新しく作成されたが、まだGitの管理下に置かれていない（Untracked）ことを示しています。そして、「コミットに含めるには、`git add` を使ってください」と、親切に次の操作を教えてくれています。

> **ヒント**: `git status` の出力結果の詳しい読み方は、Tutorial 4-3-5で詳しく学びます。今は、「Gitに現在の状況を尋ねるコマンド」として覚えておいてください。

### ➕ `git add` でステージングする

それでは、Gitの指示に従って、`README.md` をステージングエリアに追加しましょう。

```bash
git add README.md
```

何もメッセージが表示されませんが、これで `README.md` に加えられた変更（この場合は、ファイルの新規作成）が、ステージングエリアに移動しました。

もう一度、`git status` を実行して、状況の変化を確認してみましょう。

```bash
git status
```

今度は、Gitの応答が変わりました。

```
On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   README.md
```

`Changes to be committed`（コミットされるべき変更があります）というセクションに `README.md` が表示されています。これは、`README.md` が、ワーキングディレクトリからステージングエリアへと、正しく移動したことを意味します。

これで、次のコミットの準備が整いました。

### 📂 複数のファイルを一度にステージングする

実際の開発では、複数のファイルを同時に変更することがよくあります。そのような場合、ファイルを一つずつ `git add` するのは面倒です。以下のような便利なオプションがあります。

```bash
# カレントディレクトリ以下の、全ての変更をステージング
git add .

# 特定のディレクトリ以下の、全ての変更をステージング
git add src/
```

ただし、`git add .` は、意図しないファイルまでステージングしてしまう可能性があるため、使用する前に `git status` で変更内容を確認する習慣をつけましょう。

---

## ✨ まとめ

このセクションでは、`git add` コマンドについて学びました。

*   **ステージングエリア**: 次のコミットに含めたい変更を、一時的に準備しておく場所。（Tutorial 4-1-2で学んだ「段ボール箱」）
*   **`git add <ファイル名>`**: 指定したファイルの変更を、ワーキングディレクトリからステージングエリアに追加するコマンド。
*   **`git add .`**: カレントディレクトリ以下の全ての変更をステージングする便利なオプション。
*   **`git status`**: リポジトリの現在の状態を確認するためのコマンド。（詳細はTutorial 4-3-5で学びます）

なぜ、わざわざステージングエリアのような、ワンクッションを置く必要があるのでしょうか？それは、**コミットに含める変更を、自分で柔軟に選びたい**からです。例えば、3つのファイルを同時に変更したけれど、今回のコミットには、そのうちの2つの変更だけを含めたい、といった場合に、ステージングエリアは非常に役立ちます。

次のセクションでは、いよいよ、ステージングエリアに準備した変更を、`git commit` コマンドを使って、リポジトリに永久に記録します。

---
