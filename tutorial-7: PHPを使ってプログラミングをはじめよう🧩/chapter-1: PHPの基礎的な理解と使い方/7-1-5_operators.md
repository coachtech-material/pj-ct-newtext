# Tutorial 7-1-5: 演算子

## 🎯 このセクションで学ぶこと

- 四則演算（加算、減算、乗算、除算）の基本を理解する。
- 剰余演算子（余りを求める）の使い方を学ぶ。
- 比較演算子（等しい、大きい、小さいなど）を理解する。
- 論理演算子（AND、OR、NOT）の使い方を学ぶ。
- 演算子の優先順位を理解する。

---

## 導入

前のセクションで、変数という「データを入れる箱」について学びました。しかし、箱にデータを入れるだけでは、プログラムとして意味がありません。プログラミングの本質は、**データを加工・処理すること**です。

例えば、ECサイトでは「商品の価格 × 個数 = 合計金額」を計算します。ログイン画面では「入力されたパスワード == 登録されたパスワード」を比較します。これらの処理を行うために必要なのが、**演算子（Operator）**です。

演算子は、数学で使う記号（`+`、`-`、`×`、`÷`）に似ていますが、プログラミング特有のものもあります。このセクションでは、PHPで使用する主要な演算子を、カテゴリごとに詳しく学んでいきましょう。

---

## 詳細解説

### 🔢 算術演算子（四則演算）

算術演算子は、数値の計算を行うための演算子です。小学校で習った四則演算と同じ概念ですが、記号が少し異なるものもあります。

| 演算子 | 名前 | 説明 | 例 | 結果 |
| :---: | :--- | :--- | :--- | :---: |
| `+` | 加算 | 足し算 | `5 + 3` | `8` |
| `-` | 減算 | 引き算 | `10 - 4` | `6` |
| `*` | 乗算 | 掛け算（×の代わり） | `6 * 7` | `42` |
| `/` | 除算 | 割り算（÷の代わり） | `20 / 4` | `5` |
| `%` | 剰余 | 割り算の余り | `17 % 5` | `2` |
| `**` | べき乗 | 累乗（2の3乗など） | `2 ** 3` | `8` |

> 💡 **なぜ `×` ではなく `*` を使うのか？**
> キーボードには `×` や `÷` の記号がないため、プログラミングでは `*`（アスタリスク）と `/`（スラッシュ）を使います。これは、ほぼ全てのプログラミング言語で共通のルールです。

#### 算術演算子の実践例

```php
<?php

// 基本的な四則演算
$a = 10;
$b = 3;

echo $a + $b;  // 13（加算）
echo $a - $b;  // 7（減算）
echo $a * $b;  // 30（乗算）
echo $a / $b;  // 3.3333...（除算）
echo $a % $b;  // 1（剰余：10 ÷ 3 = 3 余り 1）
echo $a ** $b; // 1000（べき乗：10の3乗）
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$a + $b` | 変数 `$a` と `$b` の値を足し算する |
| `$a % $b` | `$a` を `$b` で割った余りを求める（10 ÷ 3 = 3 余り **1**） |
| `$a ** $b` | `$a` の `$b` 乗を計算する（10³ = 1000） |

#### 実務での使用例

```php
<?php

// ECサイトの合計金額計算
$price = 1500;      // 商品単価
$quantity = 3;      // 購入個数
$tax_rate = 0.10;   // 消費税率（10%）

// 小計を計算
$subtotal = $price * $quantity;
echo "小計: " . $subtotal . "円";  // 小計: 4500円

// 税込み価格を計算
$total = $subtotal * (1 + $tax_rate);
echo "税込合計: " . $total . "円";  // 税込合計: 4950円
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$price * $quantity` | 単価 × 個数 で小計を計算 |
| `$subtotal * (1 + $tax_rate)` | 小計 × 1.10 で税込み価格を計算 |
| `"小計: " . $subtotal . "円"` | 文字列と変数を `.`（ピリオド）で連結 |

#### 剰余演算子の活用

剰余演算子（`%`）は、割り算の余りを求める演算子です。一見地味ですが、実務では非常によく使います。

```php
<?php

// 偶数・奇数の判定
$number = 7;

if ($number % 2 == 0) {
    echo "$number は偶数です";
} else {
    echo "$number は奇数です";  // こちらが出力される
}

// 3の倍数かどうかの判定
$value = 15;

if ($value % 3 == 0) {
    echo "$value は3の倍数です";  // こちらが出力される
}
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$number % 2` | `$number` を 2 で割った余りを求める |
| `$number % 2 == 0` | 余りが 0 なら偶数（2で割り切れる） |
| `$value % 3 == 0` | 余りが 0 なら3の倍数（3で割り切れる） |

> 💡 **剰余演算子の実務での使いどころ**
> - 偶数・奇数の判定（テーブルの行を交互に色分けするなど）
> - N件ごとに処理を行う（10件ごとにページを分けるなど）
> - 曜日の計算（7で割った余りで曜日を判定）

---

### ⚖️ 比較演算子

比較演算子は、2つの値を比較して、その結果を**真（`true`）または偽（`false`）**で返す演算子です。条件分岐（`if`文）で頻繁に使用します。

| 演算子 | 名前 | 説明 | 例 | 結果 |
| :---: | :--- | :--- | :--- | :---: |
| `==` | 等しい | 値が等しいか | `5 == 5` | `true` |
| `!=` | 等しくない | 値が等しくないか | `5 != 3` | `true` |
| `<` | より小さい | 左が右より小さいか | `3 < 5` | `true` |
| `>` | より大きい | 左が右より大きいか | `5 > 3` | `true` |
| `<=` | 以下 | 左が右以下か | `5 <= 5` | `true` |
| `>=` | 以上 | 左が右以上か | `5 >= 3` | `true` |
| `===` | 厳密に等しい | 値と型が両方等しいか | `5 === "5"` | `false` |
| `!==` | 厳密に等しくない | 値または型が異なるか | `5 !== "5"` | `true` |

> ⚠️ **`=` と `==` の違いに注意！**
> - `=` は**代入演算子**（変数に値を入れる）
> - `==` は**比較演算子**（2つの値を比較する）
> 
> この2つを間違えると、意図しない動作やバグの原因になります。

#### 比較演算子の実践例

```php
<?php

$age = 20;
$name = "田中";

// 数値の比較
echo $age == 20;   // true（1が出力される）
echo $age > 18;    // true
echo $age < 18;    // false（何も出力されない）

// 文字列の比較
echo $name == "田中";  // true
echo $name != "佐藤";  // true
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$age == 20` | `$age` の値が 20 と等しいか比較 |
| `$age > 18` | `$age` の値が 18 より大きいか比較 |
| `$name == "田中"` | `$name` の値が "田中" と等しいか比較 |

#### `==` と `===` の違い（重要）

PHPには、**緩やかな比較（`==`）**と**厳密な比較（`===`）**の2種類があります。

```php
<?php

$number = 5;
$string = "5";

// 緩やかな比較（値のみ比較）
echo $number == $string;  // true（値は同じ「5」）

// 厳密な比較（値と型を両方比較）
echo $number === $string; // false（型が異なる：int vs string）
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$number == $string` | 値のみを比較（5 と "5" は同じ値とみなす） |
| `$number === $string` | 値と型を両方比較（int と string は異なる型） |

> 💡 **実務でのベストプラクティス**
> 予期しないバグを防ぐため、**基本的には `===`（厳密な比較）を使う**ことが推奨されます。特に、`0`、`""`（空文字）、`null`、`false` などを比較する場合は、`===` を使わないと意図しない結果になることがあります。

---

### 🔗 論理演算子

論理演算子は、複数の条件を組み合わせるための演算子です。「AかつB」「AまたはB」「Aではない」といった複合条件を表現できます。

| 演算子 | 名前 | 説明 | 例 | 結果 |
| :---: | :--- | :--- | :--- | :---: |
| `&&` | AND（かつ） | 両方が true なら true | `true && true` | `true` |
| `\|\|` | OR（または） | どちらかが true なら true | `true \|\| false` | `true` |
| `!` | NOT（否定） | true と false を反転 | `!true` | `false` |

> 💡 **`&&` と `and`、`||` と `or` の違い**
> PHPでは `&&` の代わりに `and`、`||` の代わりに `or` も使えますが、演算子の優先順位が異なります。混乱を避けるため、**`&&` と `||` を使う**ことをお勧めします。

#### 論理演算子の実践例

```php
<?php

$age = 25;
$has_license = true;

// AND（かつ）：両方の条件を満たす必要がある
if ($age >= 18 && $has_license) {
    echo "運転できます";  // こちらが出力される
}

// OR（または）：どちらかの条件を満たせばよい
$is_member = false;
$has_coupon = true;

if ($is_member || $has_coupon) {
    echo "割引が適用されます";  // こちらが出力される
}

// NOT（否定）：条件を反転
$is_logged_in = false;

if (!$is_logged_in) {
    echo "ログインしてください";  // こちらが出力される
}
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$age >= 18 && $has_license` | 18歳以上 **かつ** 免許を持っている |
| `$is_member \|\| $has_coupon` | 会員である **または** クーポンを持っている |
| `!$is_logged_in` | ログインして**いない**（`false` を `true` に反転） |

#### 実務での使用例

```php
<?php

// ユーザー認証の例
$username = "admin";
$password = "secret123";
$is_active = true;

// 全ての条件を満たす場合のみログイン成功
if ($username === "admin" && $password === "secret123" && $is_active) {
    echo "ログイン成功";
} else {
    echo "ログイン失敗";
}

// 管理者または編集者のみアクセス可能
$role = "editor";

if ($role === "admin" || $role === "editor") {
    echo "編集画面にアクセスできます";
}
```

---

### 📊 代入演算子と複合代入演算子

代入演算子（`=`）は、変数に値を代入するための演算子です。また、算術演算と代入を同時に行う**複合代入演算子**もあります。

| 演算子 | 説明 | 例 | 同等の式 |
| :---: | :--- | :--- | :--- |
| `=` | 代入 | `$a = 5` | - |
| `+=` | 加算して代入 | `$a += 3` | `$a = $a + 3` |
| `-=` | 減算して代入 | `$a -= 2` | `$a = $a - 2` |
| `*=` | 乗算して代入 | `$a *= 4` | `$a = $a * 4` |
| `/=` | 除算して代入 | `$a /= 2` | `$a = $a / 2` |
| `%=` | 剰余を代入 | `$a %= 3` | `$a = $a % 3` |
| `.=` | 文字列を連結して代入 | `$s .= "追加"` | `$s = $s . "追加"` |

#### 複合代入演算子の実践例

```php
<?php

$score = 100;

// 加算して代入
$score += 10;
echo $score;  // 110

// 減算して代入
$score -= 30;
echo $score;  // 80

// 乗算して代入
$score *= 2;
echo $score;  // 160

// 文字列の連結
$message = "こんにちは";
$message .= "、世界！";
echo $message;  // こんにちは、世界！
```

**コードリーディング**：

| コード | 説明 |
| :--- | :--- |
| `$score += 10` | `$score` に 10 を加算して、結果を `$score` に代入 |
| `$message .= "、世界！"` | `$message` に "、世界！" を連結して、結果を `$message` に代入 |

---

### 🔄 インクリメント・デクリメント演算子

変数の値を1だけ増やす（インクリメント）または減らす（デクリメント）ための演算子です。ループ処理でよく使用します。

| 演算子 | 名前 | 説明 | 例 |
| :---: | :--- | :--- | :--- |
| `++$a` | 前置インクリメント | 値を1増やしてから返す | `++$a` |
| `$a++` | 後置インクリメント | 値を返してから1増やす | `$a++` |
| `--$a` | 前置デクリメント | 値を1減らしてから返す | `--$a` |
| `$a--` | 後置デクリメント | 値を返してから1減らす | `$a--` |

```php
<?php

$count = 5;

// 後置インクリメント
echo $count++;  // 5（先に出力してから増やす）
echo $count;    // 6

// 前置インクリメント
echo ++$count;  // 7（先に増やしてから出力）

// デクリメント
echo $count--;  // 7（先に出力してから減らす）
echo $count;    // 6
```

---

### 📐 演算子の優先順位

数学と同様に、演算子には**優先順位**があります。優先順位が高い演算子から先に計算されます。

| 優先順位 | 演算子 | 説明 |
| :---: | :--- | :--- |
| 高 | `**` | べき乗 |
| ↑ | `++`, `--` | インクリメント・デクリメント |
| ｜ | `!` | 論理否定 |
| ｜ | `*`, `/`, `%` | 乗算、除算、剰余 |
| ｜ | `+`, `-` | 加算、減算 |
| ｜ | `<`, `<=`, `>`, `>=` | 比較 |
| ｜ | `==`, `!=`, `===`, `!==` | 等価比較 |
| ｜ | `&&` | 論理AND |
| ｜ | `\|\|` | 論理OR |
| 低 | `=`, `+=`, `-=` など | 代入 |

#### 優先順位の実践例

```php
<?php

// 乗算は加算より優先される
$result = 2 + 3 * 4;
echo $result;  // 14（3 * 4 = 12、2 + 12 = 14）

// 括弧で優先順位を変更
$result = (2 + 3) * 4;
echo $result;  // 20（2 + 3 = 5、5 * 4 = 20）

// 比較と論理演算の組み合わせ
$age = 25;
$is_student = true;

// 比較演算子 → 論理演算子の順で評価される
if ($age >= 18 && $is_student || $age >= 65) {
    echo "割引対象です";
}

// 括弧で意図を明確に
if (($age >= 18 && $is_student) || $age >= 65) {
    echo "割引対象です";  // 同じ結果だが、意図が明確
}
```

> 💡 **ベストプラクティス**
> 優先順位を暗記する必要はありません。**迷ったら括弧 `()` を使う**ことで、意図を明確にし、バグを防ぐことができます。

---

## ✨ まとめ

このセクションでは、PHPの演算子について学びました。

| 演算子の種類 | 主な演算子 | 用途 |
| :--- | :--- | :--- |
| **算術演算子** | `+`, `-`, `*`, `/`, `%` | 数値の計算 |
| **比較演算子** | `==`, `!=`, `<`, `>`, `===` | 値の比較（true/false を返す） |
| **論理演算子** | `&&`, `\|\|`, `!` | 複数条件の組み合わせ |
| **代入演算子** | `=`, `+=`, `-=` | 変数への代入 |
| **インクリメント** | `++`, `--` | 値を1増減 |

演算子は、プログラムの「計算」と「判断」を担う重要な要素です。特に、比較演算子と論理演算子は、次のセクションで学ぶ条件分岐（`if`文）で頻繁に使用します。

次のセクションでは、これらの演算子を使って、実際にコードを書くハンズオンを行います。

---
