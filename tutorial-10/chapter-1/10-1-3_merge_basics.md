# Tutorial 10-1-3: ãƒãƒ¼ã‚¸ã®åŸºç¤

## ğŸ¯ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å­¦ã¶ã“ã¨

*   `git merge`ã‚’ä½¿ã£ã¦ã€ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸ã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶ã€‚
*   Fast-forwardãƒãƒ¼ã‚¸ã¨Non-fast-forwardãƒãƒ¼ã‚¸ã®é•ã„ã‚’ç†è§£ã™ã‚‹ã€‚
*   ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã®ä½œæˆæ–¹æ³•ã‚’å­¦ã¶ã€‚

---

## å°å…¥ï¼šãƒãƒ¼ã‚¸ã¨ã¯ä½•ã‹ï¼Ÿ

**ãƒãƒ¼ã‚¸ï¼ˆmergeï¼‰**ã¨ã¯ã€**åˆ¥ã®ãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ã‚’ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã«çµ±åˆã™ã‚‹ã“ã¨**ã§ã™ã€‚

ä¾‹ãˆã°ã€`feature/add-login`ãƒ–ãƒ©ãƒ³ãƒã§é–‹ç™ºã—ãŸæ©Ÿèƒ½ã‚’ã€`main`ãƒ–ãƒ©ãƒ³ãƒã«çµ±åˆã™ã‚‹å ´åˆã€ãƒãƒ¼ã‚¸ã‚’ä½¿ã„ã¾ã™ã€‚

---

## è©³ç´°è§£èª¬

### ğŸ”§ ãƒãƒ¼ã‚¸ã®åŸºæœ¬

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒãƒ¼ã‚¸å…ˆã®ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ

```bash
git switch main
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒãƒ¼ã‚¸å…ƒã®ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸

```bash
git merge feature/add-login
```

ã“ã‚Œã§ã€`feature/add-login`ãƒ–ãƒ©ãƒ³ãƒã®å¤‰æ›´ãŒ`main`ãƒ–ãƒ©ãƒ³ãƒã«çµ±åˆã•ã‚Œã¾ã™ã€‚

---

### ğŸ” Fast-forwardãƒãƒ¼ã‚¸

#### æ¦‚è¦

**Fast-forwardãƒãƒ¼ã‚¸**ã¨ã¯ã€**ãƒãƒ¼ã‚¸å…ˆã®ãƒ–ãƒ©ãƒ³ãƒã«æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆãŒãªã„å ´åˆ**ã«è¡Œã‚ã‚Œã‚‹ãƒãƒ¼ã‚¸ã§ã™ã€‚

#### ä¾‹

```
main:    A --- B
              \
feature:       C --- D
```

`main`ãƒ–ãƒ©ãƒ³ãƒã«`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```
main:    A --- B --- C --- D
```

`main`ãƒ–ãƒ©ãƒ³ãƒã®ãƒã‚¤ãƒ³ã‚¿ãŒ`D`ã«ç§»å‹•ã™ã‚‹ã ã‘ã§ã€**ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã¯ä½œæˆã•ã‚Œã¾ã›ã‚“**ã€‚

---

### ğŸ” Non-fast-forwardãƒãƒ¼ã‚¸

#### æ¦‚è¦

**Non-fast-forwardãƒãƒ¼ã‚¸**ã¨ã¯ã€**ãƒãƒ¼ã‚¸å…ˆã®ãƒ–ãƒ©ãƒ³ãƒã«æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆãŒã‚ã‚‹å ´åˆ**ã«è¡Œã‚ã‚Œã‚‹ãƒãƒ¼ã‚¸ã§ã™ã€‚

#### ä¾‹

```
main:    A --- B --- E
              \
feature:       C --- D
```

`main`ãƒ–ãƒ©ãƒ³ãƒã«`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```
main:    A --- B --- E --- M
              \           /
feature:       C --- D ---
```

**ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆï¼ˆMï¼‰**ãŒä½œæˆã•ã‚Œã¾ã™ã€‚

---

### ğŸš€ å®Ÿè·µä¾‹1: Fast-forwardãƒãƒ¼ã‚¸

#### ã‚¹ãƒ†ãƒƒãƒ—1: `main`ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ

```bash
git switch main
git switch -c feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ©Ÿèƒ½é–‹ç™º

```bash
# ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
git add .
git commit -m "Add login feature"
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: `main`ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ

```bash
git switch main
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: `feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸

```bash
git merge feature/add-login
```

**å®Ÿè¡Œçµæœ**

```
Updating a1b2c3d..e4f5g6h
Fast-forward
 login.php | 10 ++++++++++
 1 file changed, 10 insertions(+)
```

`Fast-forward`ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

---

### ğŸš€ å®Ÿè·µä¾‹2: Non-fast-forwardãƒãƒ¼ã‚¸

#### ã‚¹ãƒ†ãƒƒãƒ—1: `main`ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ

```bash
git switch main
git switch -c feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ©Ÿèƒ½é–‹ç™º

```bash
# ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
git add .
git commit -m "Add login feature"
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: `main`ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆã¦ã€åˆ¥ã®å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ

```bash
git switch main
# åˆ¥ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
git add .
git commit -m "Update README"
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: `feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸

```bash
git merge feature/add-login
```

**å®Ÿè¡Œçµæœ**

```
Merge made by the 'recursive' strategy.
 login.php | 10 ++++++++++
 1 file changed, 10 insertions(+)
```

ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚

---

### ğŸ’¡ TIP: `--no-ff`ã‚ªãƒ—ã‚·ãƒ§ãƒ³

`--no-ff`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã¨ã€**Fast-forwardãƒãƒ¼ã‚¸ã§ã‚‚ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆ**ã§ãã¾ã™ã€‚

```bash
git merge --no-ff feature/add-login
```

ã“ã‚Œã«ã‚ˆã‚Šã€**ãƒãƒ¼ã‚¸ã®å±¥æ­´ãŒæ˜ç¢º**ã«ãªã‚Šã¾ã™ã€‚

---

### ğŸš€ å®Ÿè·µä¾‹3: `--no-ff`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸãƒãƒ¼ã‚¸

#### ã‚¹ãƒ†ãƒƒãƒ—1: `main`ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ

```bash
git switch main
git switch -c feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ©Ÿèƒ½é–‹ç™º

```bash
# ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
git add .
git commit -m "Add login feature"
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: `main`ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ

```bash
git switch main
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: `--no-ff`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ãƒãƒ¼ã‚¸

```bash
git merge --no-ff feature/add-login
```

**å®Ÿè¡Œçµæœ**

```
Merge made by the 'recursive' strategy.
 login.php | 10 ++++++++++
 1 file changed, 10 insertions(+)
```

ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆãŒä½œæˆã•ã‚Œã¾ã™ã€‚

---

### ğŸ” ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```
Merge branch 'feature/add-login' into main
```

`-m`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŒ‡å®šã§ãã¾ã™ã€‚

```bash
git merge --no-ff -m "Merge login feature" feature/add-login
```

---

### ğŸ’¡ TIP: ãƒãƒ¼ã‚¸å¾Œã®ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤

ãƒãƒ¼ã‚¸ãŒå®Œäº†ã—ãŸã‚‰ã€`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤ã—ã¾ã™ã€‚

```bash
git branch -d feature/add-login
```

---

### ğŸš€ å®Ÿè·µä¾‹4: ãƒãƒ¼ã‚¸å¾Œã®ãƒ–ãƒ©ãƒ³ãƒå‰Šé™¤

#### ã‚¹ãƒ†ãƒƒãƒ—1: `feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸

```bash
git switch main
git merge feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤

```bash
git branch -d feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤

```bash
git push origin --delete feature/add-login
```

---

### ğŸš¨ ã‚ˆãã‚ã‚‹é–“é•ã„

#### é–“é•ã„1: ãƒãƒ¼ã‚¸å…ˆã®ãƒ–ãƒ©ãƒ³ãƒã‚’é–“é•ãˆã‚‹

```bash
# NG: featureãƒ–ãƒ©ãƒ³ãƒã§mainã‚’ãƒãƒ¼ã‚¸
git switch feature/add-login
git merge main
```

**å¯¾å‡¦æ³•**: ãƒãƒ¼ã‚¸å…ˆã®ãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆã¦ã‹ã‚‰ãƒãƒ¼ã‚¸ã—ã¾ã™ã€‚

```bash
# OK
git switch main
git merge feature/add-login
```

---

#### é–“é•ã„2: æœªã‚³ãƒŸãƒƒãƒˆã®å¤‰æ›´ãŒã‚ã‚‹ã¾ã¾ãƒãƒ¼ã‚¸

```bash
# NG: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã›ãšã«ãƒãƒ¼ã‚¸
git add .
git merge feature/add-login
```

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**

```
error: Your local changes to the following files would be overwritten by merge:
	file.txt
Please commit your changes or stash them before you merge.
```

**å¯¾å‡¦æ³•**: å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã‹ã€`git stash`ã§ä¸€æ™‚ä¿å­˜ã—ã¾ã™ã€‚

```bash
# OK: ã‚³ãƒŸãƒƒãƒˆã™ã‚‹
git add .
git commit -m "Work in progress"
git merge feature/add-login

# OK: ä¸€æ™‚ä¿å­˜ã™ã‚‹
git stash
git merge feature/add-login
git stash pop
```

---

### ğŸ’¡ TIP: ãƒãƒ¼ã‚¸ã®å–ã‚Šæ¶ˆã—

ãƒãƒ¼ã‚¸ã‚’å–ã‚Šæ¶ˆã™ã«ã¯ã€`git reset`ã‚’ä½¿ã„ã¾ã™ã€‚

```bash
git reset --hard HEAD~1
```

ãŸã ã—ã€**ãƒªãƒ¢ãƒ¼ãƒˆã«ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸå¾Œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“**ã€‚

---

### ğŸš€ å®Ÿè·µä¾‹5: GitHub Flowã®æµã‚Œ

#### ã‚¹ãƒ†ãƒƒãƒ—1: `main`ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰`feature`ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ

```bash
git switch main
git pull origin main
git switch -c feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: æ©Ÿèƒ½é–‹ç™º

```bash
# ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
git add .
git commit -m "Add login feature"
git push origin feature/add-login
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: GitHubã§ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

#### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã€`main`ã«ãƒãƒ¼ã‚¸

GitHubã§ãƒãƒ¼ã‚¸ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ­ãƒ¼ã‚«ãƒ«ã®`main`ãƒ–ãƒ©ãƒ³ãƒã‚’æ›´æ–°

```bash
git switch main
git pull origin main
```

#### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤

```bash
git branch -d feature/add-login
```

---

## âœ¨ ã¾ã¨ã‚

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ãƒãƒ¼ã‚¸ã®åŸºç¤ã‚’å­¦ã³ã¾ã—ãŸã€‚

*   `git merge`ã‚’ä½¿ã£ã¦ã€ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒãƒ¼ã‚¸ã§ãã‚‹ã€‚
*   Fast-forwardãƒãƒ¼ã‚¸ã¯ã€ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ãªã„ã€‚
*   Non-fast-forwardãƒãƒ¼ã‚¸ã¯ã€ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã™ã‚‹ã€‚
*   `--no-ff`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã¨ã€Fast-forwardãƒãƒ¼ã‚¸ã§ã‚‚ãƒãƒ¼ã‚¸ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±ºã®å®Ÿè·µã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚

---
