# Tutorial 8-2-3: データの挿入（INSERT）

## 🎯 このセクションで学ぶこと

*   `INSERT` 文を使って、テーブルに、新しい、レコード（データ）を、追加できるようになる。
*   `INSERT` 文の、基本的な、2つの、構文（カラム名を、指定する、方法と、しない、方法）を、理解する。
*   一度に、複数の、レコードを、挿入する、方法を、知る。
*   phpMyAdminの、GUIを、使って、データを、挿入する、方法も、知る。

---

## 導入

前のセクションで、`CREATE` 文を、使って、`users` テーブルという、「空の、住所録」を、作成しました。しかし、現時点では、まだ、誰も、登録されていません。このセクションでは、DML（データ操作言語）の、一つである、**`INSERT`** 文を、使って、このテーブルに、最初の、ユーザーデータを、追加する方法を学びます。

`INSERT` は、その名の通り、テーブルに、新しい、行（レコード）を、「挿入（insert）」するための、コマンドです。ここから、データベースが、単なる、構造から、意味のある、情報を、持つ、存在へと、変わっていきます。

---

## 詳細解説

### 👤 1件のデータを挿入する (`INSERT INTO ... VALUES`)

`INSERT` 文の、最も、基本的な、構文は、以下の通りです。

```sql
INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
```

*   `INSERT INTO table_name`: どの、テーブルに、データを、挿入するかを、指定します。
*   `(column1, column2, ...)`: どの、カラムに、値を、設定するかを、列挙します。
*   `VALUES (value1, value2, ...)`: 上記で、指定した、カラムに、対応する、値を、列挙します。

それでは、実際に、`users` テーブルに、1件の、ユーザーデータを、追加してみましょう。

```sql
INSERT INTO users (name, email, password)
VALUES ('John Doe', 'john.doe@example.com', 'password123');
```

この、SQL文を、分解してみましょう。

*   `INSERT INTO users`: `users` テーブルに、挿入します。
*   `(name, email, password)`: `name`, `email`, `password` の、3つの、カラムに、値を、設定します。
*   `VALUES ('John Doe', 'john.doe@example.com', 'password123')`: `name` には `'John Doe'` を、`email` には `'john.doe@example.com'` を、`password` には `'password123'` を、それぞれ、設定します。

**`id` と `created_at` はどうなった？**

`CREATE TABLE` の際に、`id` カラムには、`AUTO_INCREMENT` を、`created_at` カラムには、`DEFAULT CURRENT_TIMESTAMP` を、設定しました。そのため、`INSERT` 文で、値を、指定しなくても、MySQLが、自動的に、適切な、値を、設定してくれます。

*   `id`: 自動で、`1` が、割り振られます。
*   `created_at`: この、SQLが、実行された、日時が、自動で、記録されます。

#### カラム名を省略する構文

もし、テーブルの、全ての、カラムに対して、順番通りに、値を、指定する場合は、カラムリストを、省略することもできます。

```sql
-- この構文は、あまり、推奨されない
INSERT INTO users
VALUES (2, 'Jane Smith', 'jane.smith@example.com', 'password456', NOW());
```

この構文は、`CREATE TABLE` で、定義された、カラムの、順番（`id`, `name`, `email`, `password`, `created_at`）を、正確に、覚えておく必要があります。`NOW()` は、現在日時を、返す、MySQLの、関数です。

**なぜ、推奨されないのか？**

将来的に、テーブルの、カラムの、順番が、変わったり、新しい、カラムが、追加されたりした場合、この、SQL文は、エラーに、なるか、意図しない、カラムに、データが、入ってしまう、可能性が、あります。そのため、**カラム名を、明示的に、指定する、最初の、構文の方が、安全で、可読性も、高い**と、言えます。

### 👥 複数のデータを一度に挿入する

`VALUES` 句の、後に、カンマで、区切って、値の、セットを、複数、記述することで、一度の、`INSERT` 文で、複数の、レコードを、挿入することができます。その方が、何度も、`INSERT` 文を、実行するよりも、効率的です。

```sql
INSERT INTO users (name, email, password)
VALUES
    ('Alice', 'alice@example.com', 'pass_alice'),
    ('Bob', 'bob@example.com', 'pass_bob'),
    ('Charlie', 'charlie@example.com', 'pass_charlie');
```

この、1つの、SQL文で、3人の、ユーザーが、`users` テーブルに、追加されます。

**phpMyAdminでの実行と確認**

1.  phpMyAdminで、`laravel_db` データベースを、選択します。
2.  「SQL」タブを、開き、上記の、`INSERT` 文を、実行します。
3.  成功したら、「表示」タブを、クリックします。

**[ここに、usersテーブルの、データが、表示されている、スクリーンショットを、挿入]**

`id` が、自動で、連番に、なっていること、`created_at` に、日時が、入っていること、そして、指定した、`name`, `email`, `password` が、正しく、格納されていることを、確認できます。

#### GUIでのデータ挿入

phpMyAdminでは、GUI操作で、データを、挿入することもできます。

1.  `users` テーブルを、選択します。
2.  上部の、「挿入」タブを、クリックします。
3.  各カラムに、対応する、入力フォームが、表示されます。

**[ここに、GUIでの、データ挿入画面の、スクリーンショットを、挿入]**

*   **値**: 挿入したい、データを、入力します。（`id` は、自動採番なので、空のままでOKです）
*   **関数**: `created_at` のように、日時を、入れたい場合、プルダウンから、`NOW()` を、選択することができます。

フォームに、値を、入力し、「実行」ボタンを、押すと、データが、挿入されます。この時も、phpMyAdminが、生成した、`INSERT` 文が、表示されるので、SQLの、学習に、役立てましょう。

---

## ✨ まとめ

このセクションでは、`INSERT` 文を、使って、テーブルに、新しい、データを、追加する方法を学びました。

*   テーブルに、データを、追加するには、`INSERT INTO ... VALUES ...` 文を、使う。
*   安全性のために、挿入する、カラム名を、明示的に、指定する、構文が、推奨される。
*   `AUTO_INCREMENT` や `DEFAULT` が、設定された、カラムは、値を、指定しなくても、自動で、補完される。
*   `VALUES` 句に、複数の、値の、セットを、記述することで、一度に、複数の、レコードを、挿入できる。
*   phpMyAdminの、「挿入」タブを、使えば、GUIで、直感的に、データを、追加できる。

これで、データベースに、データを、蓄積する、方法が、わかりました。しかし、ただ、入れるだけでは、意味が、ありません。次のセクションでは、データベースの、真骨頂とも言える、データの、取得（検索）を、行う、`SELECT` 文について、学んでいきます。

---
