
# Tutorial 8-4-1: ã‚ˆã‚Šé«˜åº¦ãªçµžã‚Šè¾¼ã¿ã¨ä¸¦ã³æ›¿ãˆ

## ðŸŽ¯ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å­¦ã¶ã“ã¨

*   `WHERE`å¥ã§ã€ã‚ˆã‚Šè¤‡é›‘ãªæ¡ä»¶ã‚’æŒ‡å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’çµžã‚Šè¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
*   `AND`, `OR`, `NOT`ã‚’ä½¿ã£ã¦ã€è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹æ³•ã‚’ç†è§£ã™ã‚‹ã€‚
*   `LIKE`ã‚’ä½¿ã£ãŸã€ã‚ã„ã¾ã„æ¤œç´¢ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰ã®æ–¹æ³•ã‚’ãƒžã‚¹ã‚¿ãƒ¼ã™ã‚‹ã€‚
*   `IN`ã‚„`BETWEEN`ã‚’ä½¿ã£ã¦ã€ã‚ˆã‚Šç°¡æ½”ã«æ¡ä»¶ã‚’è¨˜è¿°ã™ã‚‹æ–¹æ³•ã‚’çŸ¥ã‚‹ã€‚
*   `ORDER BY`å¥ã‚’ä½¿ã£ã¦ã€å–å¾—ã—ãŸçµæžœã‚’ç‰¹å®šã®é †åºã§ä¸¦ã³æ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
*   `LIMIT`ã¨`OFFSET`å¥ã‚’ä½¿ã„ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬çš„ãªä»•çµ„ã¿ã‚’SQLã§å®Ÿç¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚

---

## å°Žå…¥ï¼šå¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€æ¬²ã—ã„æƒ…å ±ã ã‘ã‚’å–ã‚Šå‡ºã™æŠ€è¡“

ã“ã‚Œã¾ã§ã®å­¦ç¿’ã§ã€`SELECT`æ–‡ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€`JOIN`ã§è¤‡æ•°ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’çµåˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã—ã‹ã—ã€å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ä½•ç™¾ä¸‡ã€ä½•åƒä¸‡ã¨ã„ã†ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ä¸­ã‹ã‚‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ã¨ã™ã‚‹ç‰¹å®šã®æƒ…å ±ã ã‘ã‚’ã€è¦‹ã‚„ã™ã„é †åºã§ã€å°‘ã—ãšã¤è¡¨ç¤ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä¾‹ãˆã°ã€ECã‚µã‚¤ãƒˆã§ã€Œä¾¡æ ¼ãŒ1ä¸‡å††ä»¥ä¸‹ã§ã€è©•ä¾¡ãŒ4ä»¥ä¸Šã®ã€äººæ°—é †ã®ãƒ†ãƒ¬ãƒ“ã€ã‚’æŽ¢ã™ã‚ˆã†ãªå ´é¢ã‚’æƒ³åƒã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã€Œä¾¡æ ¼ã€ã€Œè©•ä¾¡ã€ã€Œäººæ°—åº¦ã€ã¨ã„ã£ãŸæ¡ä»¶ã§å•ã„åˆã‚ã›ï¼ˆã‚¯ã‚¨ãƒªï¼‰ã‚’æŠ•ã’ã€çµæžœã‚’ä¸¦ã³æ›¿ãˆã¦ã„ã‚‹ã®ã§ã™ã€‚

ã¾ãŸã€æ¤œç´¢çµæžœãŒ1000ä»¶ã‚ã£ãŸã¨ã—ã¦ã€ãã‚Œã‚’ä¸€åº¦ã«è¡¨ç¤ºã™ã‚‹ã¨ãƒ–ãƒ©ã‚¦ã‚¶ãŒå›ºã¾ã£ã¦ã—ã¾ã„ã¾ã™ã€‚é€šå¸¸ã¯ã€Œ1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Š20ä»¶ãšã¤ã€ã®ã‚ˆã†ã«åŒºåˆ‡ã£ã¦è¡¨ç¤ºã—ã¾ã™ã€‚ã“ã‚ŒãŒ**ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**ã§ã™ã€‚

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€`SELECT`æ–‡ã®èƒ½åŠ›ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ãŸã‚ã®é‡è¦ãªå¥ã€`WHERE`ï¼ˆçµžã‚Šè¾¼ã¿ï¼‰ã€`ORDER BY`ï¼ˆä¸¦ã³æ›¿ãˆï¼‰ã€`LIMIT`/`OFFSET`ï¼ˆä»¶æ•°åˆ¶é™ï¼‰ã‚’å­¦ã³ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ä½¿ã„ã“ãªã™ã“ã¨ã§ã€å˜ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã ã‘ã§ãªãã€ã€Œæ„å‘³ã®ã‚ã‚‹æƒ…å ±ã€ã‚’åŠ¹çŽ‡çš„ã«å¼•ãå‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

---

## è©³ç´°è§£èª¬

### ðŸ” `WHERE`å¥ã«ã‚ˆã‚‹é«˜åº¦ãªçµžã‚Šè¾¼ã¿

`WHERE`å¥ã¯ã™ã§ã«ãŠãªã˜ã¿ã§ã™ãŒã€ã“ã“ã§ã¯ã•ã‚‰ã«å¼·åŠ›ãªä½¿ã„æ–¹ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

#### è¤‡æ•°ã®æ¡ä»¶ã‚’çµ„ã¿åˆã‚ã›ã‚‹ (`AND`, `OR`, `NOT`)

*   `AND`: **ã™ã¹ã¦ã®æ¡ä»¶**ã‚’æº€ãŸã™å ´åˆã«çœŸã¨ãªã‚Šã¾ã™ã€‚ï¼ˆã€ŒAã‹ã¤Bã€ï¼‰
*   `OR`: **ã„ãšã‚Œã‹ã®æ¡ä»¶**ã‚’æº€ãŸã™å ´åˆã«çœŸã¨ãªã‚Šã¾ã™ã€‚ï¼ˆã€ŒAã¾ãŸã¯Bã€ï¼‰
*   `NOT`: æ¡ä»¶ã‚’**å¦å®š**ã—ã¾ã™ã€‚ï¼ˆã€ŒAã§ã¯ãªã„ã€ï¼‰

**ä¾‹ï¼š`id`ãŒ1ã§ã€ã‹ã¤`title`ãŒ'åˆã‚ã¦ã®æŠ•ç¨¿'ã§ã‚ã‚‹æŠ•ç¨¿ã‚’å–å¾—**
```sql
SELECT * FROM posts WHERE user_id = 1 AND title = 'åˆã‚ã¦ã®æŠ•ç¨¿';
```

**ä¾‹ï¼š`user_id`ãŒ1ã¾ãŸã¯2ã§ã‚ã‚‹æŠ•ç¨¿ã‚’å–å¾—**
```sql
SELECT * FROM posts WHERE user_id = 1 OR user_id = 2;
```

`AND`ã¨`OR`ã‚’æ··åœ¨ã•ã›ã‚‹å ´åˆã¯ã€æ„å›³ã—ãªã„çµæžœã‚’é¿ã‘ã‚‹ãŸã‚ã«`()`ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹ã“ã¨ãŒæŽ¨å¥¨ã•ã‚Œã¾ã™ã€‚

**ä¾‹ï¼š`user_id`ãŒ1ã§ã€ã‹ã¤ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãŒ'A' ã¾ãŸã¯ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«'B'ãŒå«ã¾ã‚Œã‚‹ï¼‰æŠ•ç¨¿**
```sql
SELECT * FROM posts WHERE user_id = 1 AND (title = 'A' OR content LIKE '%B%');
```

#### ã‚ã„ã¾ã„æ¤œç´¢ (`LIKE`)

å®Œå…¨ä¸€è‡´ã§ã¯ãªãã€ç‰¹å®šã«æ–‡å­—åˆ—ã‚’å«ã‚€ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æŽ¢ã—ãŸã„å ´åˆã«`LIKE`ã‚’ä½¿ã„ã¾ã™ã€‚`%`ï¼ˆ0æ–‡å­—ä»¥ä¸Šã®ä»»æ„ã®æ–‡å­—åˆ—ï¼‰ã‚„`_`ï¼ˆä»»æ„ã®1æ–‡å­—ï¼‰ã¨ã„ã£ãŸãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ã¨çµ„ã¿åˆã‚ã›ã¾ã™ã€‚

*   `'A%'` : Aã‹ã‚‰å§‹ã¾ã‚‹
*   `'%A'` : Aã§çµ‚ã‚ã‚‹
*   `'%A%'` : Aã‚’å«ã‚€
*   `'A_B'` : Aã§å§‹ã¾ã‚Šã€Bã§çµ‚ã‚ã‚Šã€é–“ã«1æ–‡å­—ã ã‘ã‚ã‚‹ï¼ˆä¾‹: `AAB`, `AXB`ï¼‰

**ä¾‹ï¼šã‚¿ã‚¤ãƒˆãƒ«ã«ã€Œå…¥é–€ã€ã¨ã„ã†å˜èªžã‚’å«ã‚€æŠ•ç¨¿ã‚’æ¤œç´¢**
```sql
SELECT * FROM posts WHERE title LIKE '%å…¥é–€%';
```

#### ç¯„å›²æŒ‡å®š (`BETWEEN`) ã¨ãƒªã‚¹ãƒˆæŒ‡å®š (`IN`)

æ¡ä»¶å¼ã‚’ã‚ˆã‚Šç°¡æ½”ã«æ›¸ããŸã‚ã®ä¾¿åˆ©ãªæ¼”ç®—å­ã§ã™ã€‚

*   `BETWEEN A AND B`: Aã‹ã‚‰Bã¾ã§ã®ç¯„å›²ï¼ˆAã¨Bã‚’å«ã‚€ï¼‰
*   `IN (A, B, C)`: A, B, Cã®ã„ãšã‚Œã‹ã«ä¸€è‡´

**ä¾‹ï¼š`id`ãŒ1ã‹ã‚‰3ã¾ã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—**
```sql
-- é€šå¸¸ã®æ›¸ãæ–¹
SELECT * FROM users WHERE id >= 1 AND id <= 3;

-- BETWEENã‚’ä½¿ã£ãŸæ›¸ãæ–¹
SELECT * FROM users WHERE id BETWEEN 1 AND 3;
```

**ä¾‹ï¼š`user_id`ãŒ1ã¾ãŸã¯3ã§ã‚ã‚‹æŠ•ç¨¿ã‚’å–å¾—**
```sql
-- ORã‚’ä½¿ã£ãŸæ›¸ãæ–¹
SELECT * FROM posts WHERE user_id = 1 OR user_id = 3;

-- INã‚’ä½¿ã£ãŸæ›¸ãæ–¹
SELECT * FROM posts WHERE user_id IN (1, 3);
```
`IN`ã¯ã€ã‚µãƒ–ã‚¯ã‚¨ãƒªã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã•ã‚‰ã«å¼·åŠ›ã«ãªã‚Šã¾ã™ãŒã€ãã‚Œã¯ã¾ãŸåˆ¥ã®æ©Ÿä¼šã«å­¦ã³ã¾ã™ã€‚

### ðŸ“Š `ORDER BY`å¥ã«ã‚ˆã‚‹ä¸¦ã³æ›¿ãˆ

å–å¾—ã—ãŸçµæžœã‚»ãƒƒãƒˆã‚’ã€æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ã®å€¤ã«åŸºã¥ã„ã¦ä¸¦ã³æ›¿ãˆã¾ã™ã€‚

*   `ASC`: **æ˜‡é †** (Ascending) - å°ã•ã„ã‚‚ã®ã‹ã‚‰å¤§ãã„ã‚‚ã®ã¸ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
*   `DESC`: **é™é †** (Descending) - å¤§ãã„ã‚‚ã®ã‹ã‚‰å°ã•ã„ã‚‚ã®ã¸

**ä¾‹ï¼šæŠ•ç¨¿ã‚’ä½œæˆæ—¥æ™‚ã®æ–°ã—ã„é †ï¼ˆé™é †ï¼‰ã«ä¸¦ã³æ›¿ãˆã‚‹**
```sql
SELECT * FROM posts ORDER BY created_at DESC;
```

è¤‡æ•°ã®ã‚«ãƒ©ãƒ ã‚’çµ„ã¿åˆã‚ã›ã¦ä¸¦ã³æ›¿ãˆã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ãã®å ´åˆã€å…ˆã«æŒ‡å®šã—ãŸã‚«ãƒ©ãƒ ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

**ä¾‹ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®æ˜‡é †ã§ä¸¦ã³æ›¿ãˆã€åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®ä¸­ã§ã¯ä½œæˆæ—¥æ™‚ã®æ–°ã—ã„é †ã«ä¸¦ã³æ›¿ãˆã‚‹**
```sql
SELECT * FROM posts ORDER BY user_id ASC, created_at DESC;
```

### ðŸ“– `LIMIT`ã¨`OFFSET`ã«ã‚ˆã‚‹ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†å‰²ã—ã¦å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯ã€ã¾ã•ã«ã“ã®ä»•çµ„ã¿ã§å®Ÿç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚

*   `LIMIT [ä»¶æ•°]`: å–å¾—ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æœ€å¤§ä»¶æ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚
*   `OFFSET [é–‹å§‹ä½ç½®]`: ä½•ä»¶ç›®ã‹ã‚‰å–å¾—ã‚’é–‹å§‹ã™ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ï¼ˆ0ã‹ã‚‰å§‹ã¾ã‚‹ï¼‰ã€‚

**ä¾‹ï¼šæœ€æ–°ã®æŠ•ç¨¿ã‚’5ä»¶ã ã‘å–å¾—ã™ã‚‹**
```sql
SELECT * FROM posts ORDER BY created_at DESC LIMIT 5;
```

**ä¾‹ï¼š1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Š10ä»¶è¡¨ç¤ºã™ã‚‹å ´åˆã®ã€3ãƒšãƒ¼ã‚¸ç›®ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹**

*   è¡¨ç¤ºä»¶æ•°: 10ä»¶ (`LIMIT 10`)
*   é–‹å§‹ä½ç½®: (3ãƒšãƒ¼ã‚¸ç›® - 1) * 10ä»¶ = 20ä»¶ç›®ã‹ã‚‰ (`OFFSET 20`)

```sql
SELECT * FROM posts ORDER BY created_at DESC LIMIT 10 OFFSET 20;
```

ã“ã®`LIMIT`ã¨`OFFSET`ã®çµ„ã¿åˆã‚ã›ã¯ã€Web APIã‚’è¨­è¨ˆã™ã‚‹éš›ã«ã‚‚é »ç¹ã«ç™»å ´ã™ã‚‹éžå¸¸ã«é‡è¦ãªæ¦‚å¿µã§ã™ã€‚

---

## âœ¨ ã¾ã¨ã‚

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€`SELECT`æ–‡ã‚’ã‚ˆã‚Šå®Ÿè·µçš„ã«ä½¿ã†ãŸã‚ã®çµžã‚Šè¾¼ã¿ã€ä¸¦ã³æ›¿ãˆã€ä»¶æ•°åˆ¶é™ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’å­¦ã³ã¾ã—ãŸã€‚

*   `WHERE`å¥ã§ã¯ã€`AND`, `OR`, `NOT`ã‚’ä½¿ã£ã¦è¤‡é›‘ãªæ¡ä»¶ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
*   `LIKE`ã¨ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰`%`ã‚’ä½¿ãˆã°ã€æ–‡å­—åˆ—ã®éƒ¨åˆ†ä¸€è‡´ã«ã‚ˆã‚‹ã‚ã„ã¾ã„æ¤œç´¢ãŒå¯èƒ½ã«ãªã‚‹ã€‚
*   `BETWEEN`ã‚„`IN`ã‚’ä½¿ã†ã¨ã€ç¯„å›²æŒ‡å®šã‚„ãƒªã‚¹ãƒˆæŒ‡å®šã®æ¡ä»¶ã‚’ç°¡æ½”ã«è¨˜è¿°ã§ãã‚‹ã€‚
*   `ORDER BY`å¥ã§ã€çµæžœã®ä¸¦ã³é †ã‚’`ASC`ï¼ˆæ˜‡é †ï¼‰ã¾ãŸã¯`DESC`ï¼ˆé™é †ï¼‰ã§è‡ªç”±ã«åˆ¶å¾¡ã§ãã‚‹ã€‚
*   `LIMIT`ï¼ˆä»¶æ•°ï¼‰ã¨`OFFSET`ï¼ˆé–‹å§‹ä½ç½®ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’SQLã§å®Ÿç¾ã§ãã‚‹ã€‚

ã“ã‚Œã‚‰ã®å¥ã¯ã€`SELECT`æ–‡ã®åŸºæœ¬çš„ãªæ§‹é€ ã®ä¸€éƒ¨ã§ã™ã€‚å®Ÿè¡Œã•ã‚Œã‚‹é †åºã¯ `FROM` â†’ `WHERE` â†’ `GROUP BY` â†’ `HAVING` â†’ `SELECT` â†’ `ORDER BY` â†’ `LIMIT` ã¨ãªã£ã¦ãŠã‚Šã€ã“ã®æµã‚Œã‚’æ„è­˜ã™ã‚‹ã¨ã€ã‚ˆã‚Šè¤‡é›‘ãªã‚¯ã‚¨ãƒªã‚‚ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

æ¬¡ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã€é›†è¨ˆã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªæ©Ÿèƒ½ã§ã‚ã‚‹ã€Œé›†è¨ˆé–¢æ•°ã€ã¨`GROUP BY`å¥ã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚

---

## ðŸ“ å­¦ç¿’ã®ãƒã‚¤ãƒ³ãƒˆ

- [ ] `AND`ã¨`OR`ã‚’çµ„ã¿åˆã‚ã›ãŸ`WHERE`å¥ã‚’æ›¸ãã€è¤‡æ•°ã®æ¡ä»¶ã§ãƒ‡ãƒ¼ã‚¿ã‚’çµžã‚Šè¾¼ã‚ã‚‹ã€‚
- [ ] `LIKE '%...%'` ã‚’ä½¿ã£ã¦ã€ç‰¹å®šã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢ã§ãã‚‹ã€‚
- [ ] `ORDER BY ... DESC` ã‚’ä½¿ã£ã¦ã€æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰é †ç•ªã«ä¸¦ã³æ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
- [ ] `LIMIT`ã¨`OFFSET`ã‚’ä½¿ã£ã¦ã€ç‰¹å®šã®ãƒšãƒ¼ã‚¸ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹SQLæ–‡ã‚’æ›¸ã‘ã‚‹ã€‚
