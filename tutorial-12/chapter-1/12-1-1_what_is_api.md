# Tutorial 12-1-1: APIとは何か

## 🎯 このセクションで学ぶこと

- API（Application Programming Interface）の概念を理解する
- Web APIの仕組みと役割を学ぶ
- RESTful APIの基本的な考え方を理解する

---

## 🧠 先輩エンジニアの思考プロセス

### 「なぜAPI開発を学ぶのか？」

Tutorial 11でWebアプリケーションを完成させました。次は「API開発」です。

---

### 理由1: モダンな開発では必須

現代のWebサービスは、**フロントエンドとバックエンドが分離**していることが多いです。

| 役割 | 技術 |
|------|------|
| フロントエンド | React、Vue.js、Next.js など |
| バックエンド | Laravel API |

APIを作れるようになると、**様々なフロントエンドと連携**できます。

---

### 理由2: モバイルアプリとの連携

スマートフォンアプリは、**APIを通じてサーバーと通信**します。

APIを作れるようになると、モバイルアプリのバックエンドも開発できます。

---

### 理由3: まずは概念の理解から

いきなりコードを書く前に、**APIとは何か**を理解することが重要です。

このセクションでは、APIの基本概念を学びます。

---

### このセクションでやること

| 順番 | 作業 | 理由 |
|------|------|------|
| Step 1 | APIの概念を理解 | 何を作るのかを明確にする |
| Step 2 | REST APIの特徴を学ぶ | 業界標準の設計方針を理解 |
| Step 3 | HTTPメソッドとステータスコード | GET、POST、PUT、DELETEの使い分け |

> 💡 **ポイント**: APIは「アプリケーション同士が会話するための約束事」です。

---

## Step 1: APIの基本概念

### 1-1. APIとは

**API（Application Programming Interface）**とは、**アプリケーション同士が通信するための仕組み**です。

APIを使うことで、以下のようなことが可能になります。

| 用途 | 説明 |
|------|------|
| フロントエンドとバックエンドの分離 | ReactやVue.jsとLaravelを連携 |
| モバイルアプリとの連携 | iOSやAndroidアプリからデータにアクセス |
| 外部サービスとの連携 | 天気予報API、決済API、地図APIなどを利用 |

---

### 1-2. APIの例

日常生活の中で、私たちは多くのAPIを使っています。

**例1: 天気予報アプリ**

```
天気予報アプリ → 気象庁API → 天気情報
```

**例2: ソーシャルログイン**

```
Webサイト → Google API → ユーザー情報
```

**例3: 地図アプリ**

```
地図アプリ → Google Maps API → 地図情報
```

---

### 1-3. Web APIとは

**Web API**とは、**HTTPプロトコルを使って通信するAPI**です。

| 特徴 | 説明 |
|------|------|
| HTTPメソッドを使う | GET、POST、PUT、DELETEなど |
| URLでリソースを指定 | `/api/tasks`、`/api/users/1`など |
| JSON形式でデータをやり取り | `{"id": 1, "title": "タスク1"}` |

---

## Step 2: RESTful APIの基礎

### 2-1. RESTful APIとは

**RESTful API**とは、**REST（Representational State Transfer）の原則に従ったAPI**です。

| 原則 | 説明 |
|------|------|
| リソース指向 | URLでリソースを表現する |
| HTTPメソッドを使う | GET、POST、PUT、DELETEなど |
| ステートレス | サーバーはクライアントの状態を保持しない |
| 統一されたインターフェース | 一貫性のあるURLとHTTPメソッドを使う |

---

### 2-2. RESTful APIの例

**タスク管理システムのAPI**

| HTTPメソッド | URL | 説明 |
|---|---|---|
| GET | `/api/tasks` | タスク一覧を取得 |
| GET | `/api/tasks/1` | ID=1のタスクを取得 |
| POST | `/api/tasks` | タスクを作成 |
| PUT | `/api/tasks/1` | ID=1のタスクを更新 |
| DELETE | `/api/tasks/1` | ID=1のタスクを削除 |

---

### 2-3. HTTPメソッドの役割

| HTTPメソッド | 役割 | 例 |
|---|---|---|
| GET | データを取得する | タスク一覧を取得 |
| POST | データを作成する | 新しいタスクを作成 |
| PUT | データを更新する | タスクを更新 |
| PATCH | データの一部を更新する | タスクのステータスのみを更新 |
| DELETE | データを削除する | タスクを削除 |

---

## Step 3: APIのレスポンス

### 3-1. JSON形式のレスポンス

APIは、通常**JSON形式**でデータを返します。

**例: タスク一覧のレスポンス**

```json
{
  "data": [
    {
      "id": 1,
      "title": "タスク1",
      "description": "これはタスク1です",
      "status": "pending",
      "due_date": "2024-12-31"
    },
    {
      "id": 2,
      "title": "タスク2",
      "description": "これはタスク2です",
      "status": "completed",
      "due_date": "2024-11-30"
    }
  ]
}
```

---

### 3-2. エラーレスポンス

APIは、エラーが発生した場合、**HTTPステータスコード**と**エラーメッセージ**を返します。

**例: バリデーションエラー（422）**

```json
{
  "message": "The given data was invalid.",
  "errors": {
    "title": [
      "The title field is required."
    ]
  }
}
```

**例: 認証エラー（401）**

```json
{
  "message": "Unauthenticated."
}
```

**例: 権限エラー（403）**

```json
{
  "message": "This action is unauthorized."
}
```

---

### 3-3. HTTPステータスコード

| ステータスコード | 意味 | 例 |
|---|---|---|
| 200 | OK | リクエスト成功 |
| 201 | Created | リソースが作成された |
| 204 | No Content | リクエスト成功（レスポンスなし） |
| 400 | Bad Request | リクエストが不正 |
| 401 | Unauthorized | 認証が必要 |
| 403 | Forbidden | 権限がない |
| 404 | Not Found | リソースが見つからない |
| 422 | Unprocessable Entity | バリデーションエラー |
| 500 | Internal Server Error | サーバーエラー |

---

### 3-4. APIの利点と欠点

**利点**

| 利点 | 説明 |
|------|------|
| フロントエンドとバックエンドの分離 | 開発チームを分けることができる |
| 複数のクライアントに対応 | Web、iOS、Androidなど |
| 再利用性が高い | 同じAPIを複数のアプリケーションで使用 |
| スケーラビリティ | 独立してスケールできる |

**欠点**

| 欠点 | 説明 |
|------|------|
| 開発コストが高い | 別々に開発する必要がある |
| セキュリティリスク | 適切な認証と認可が必要 |
| ドキュメントの管理 | 常に最新に保つ必要がある |

---

## 💡 TIP: APIドキュメントの重要性

APIを開発する際は、**APIドキュメント**を作成することが重要です。

| 記載内容 | 説明 |
|----------|------|
| エンドポイント | URL |
| HTTPメソッド | GET、POST、PUT、DELETEなど |
| リクエストパラメータ | 必須/任意、データ型、説明 |
| レスポンス | 成功時とエラー時の例 |
| 認証方法 | APIキー、トークンなど |

---

## ✨ まとめ

このセクションでは、APIの基本的な概念について学びました。

| Step | 学んだこと |
|------|-----------|
| Step 1 | APIの基本概念とWeb API |
| Step 2 | RESTful APIの原則とHTTPメソッド |
| Step 3 | JSON形式のレスポンスとHTTPステータスコード |

次のセクションでは、LaravelでAPIを開発する方法を学びます。

---

## 📝 学習のポイント

- [ ] API（Application Programming Interface）の概念を理解した
- [ ] Web APIの仕組みと役割を学んだ
- [ ] RESTful APIの基本的な考え方を理解した
