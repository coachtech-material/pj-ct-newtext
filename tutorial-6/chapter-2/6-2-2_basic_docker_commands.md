# Tutorial 6-2-2: Dockerの基本コマンド

## 🎯 このセクションで学ぶこと

*   Dockerを操作するための、最も基本的で、重要なコマンド（`run`, `ps`, `stop`, `rm`, `images`）を学ぶ。
*   コンテナのライフサイクル（作成、実行、停止、削除）を、コマンドと関連付けて理解する。

---

## 導入

Dockerのインストールが完了し、`hello-world`コンテナを動かすことにも成功しました。いよいよ、ここからが本番です。このセクションでは、Dockerを、コマンドラインから操作するための、基本的なコマンドを学んでいきます。

このセクションで学ぶコマンドは、Dockerを扱う上で、基礎となる重要コマンドです。一つ一つのコマンドの意味と役割を、確認していきましょう。

> 📝 **本チュートリアルでのDocker操作について**
> 
> このチュートリアルでは、LaravelのDocker環境として「**Laravel Sail**」というツールを使用します。Sailを使うと、ここで学ぶDockerコマンドを直接使う機会は少なくなりますが、**Dockerの基本概念を理解しておくことで、トラブル発生時に何が起きているのかを把握しやすくなります**。

---

## 詳細解説

### 🏃 コンテナの実行: `docker run`

`docker run`は、新しいコンテナを、作成し、実行するための、最も基本的なコマンドです。`hello-world`の時にも使いましたね。

今度は、もう少し、実用的なコンテナとして、Webサーバーである、**Nginx（エンジンエックス）**のコンテナを、動かしてみましょう。

```bash
docker run --name my-nginx -d -p 8080:80 nginx
```

このコマンドは、少し複雑に見えるので、分解して見ていきましょう。

*   `docker run`: 新しいコンテナを実行します。
*   `--name my-nginx`: コンテナに、「my-nginx」という、人間が識別しやすい名前を付けます。
*   `-d`: 「Detachedモード」の略で、コンテナを、**バックグラウンドで**実行します。
*   `-p 8080:80`: ホストOS（あなたのPC）の8080番ポートと、コンテナの80番ポートを繋ぎます。
*   `nginx`: 実行する、**イメージ名**です。

このコマンドを実行した後、Webブラウザで、`http://localhost:8080` にアクセスしてみてください。「Welcome to nginx!」というページが表示されれば、あなたのPC上で、Nginxコンテナが、正常に動いている証拠です。

### 📋 実行中のコンテナ一覧: `docker ps`

`docker ps` (Process Status) は、現在、実行中のコンテナの一覧を表示するコマンドです。

```bash
docker ps
```

先ほど起動した `my-nginx` コンテナの情報（コンテナID、イメージ名、ポート設定、名前など）が、表形式で表示されるはずです。

停止中のコンテナも含めて、全てのコンテナを表示したい場合は、`-a` (all) オプションを付けます。

```bash
docker ps -a
```

### 💻 コンテナの中に入る: `docker exec`

`docker exec` (Execute) は、実行中のコンテナの中で、コマンドを実行するためのコマンドです。

```bash
docker exec -it my-nginx /bin/bash
```

*   `-it`: コンテナと、対話的にやり取りをするためのオプションです。
*   `my-nginx`: コマンドを実行する、対象のコンテナ名。
*   `/bin/bash`: コンテナの中で実行するコマンド（シェルを起動）。

このコマンドを実行すると、コンテナの中に入ることができます。コンテナから出るには、`exit`と入力します。

> 📝 **Sailを使う場合**
> 
> 本チュートリアルで扱うLaravelでは、「**Sail**」というツールを使用します。Sailを使う場合、コンテナの中に入るには `sail shell` というコマンドを使います。ここでは「`docker exec`でコンテナの中に入れる」という概念だけ理解しておけば大丈夫です。

### 🛑 コンテナの停止と削除

*   **コンテナの停止: `docker stop`**

    ```bash
    docker stop my-nginx
    ```

    このコマンドを実行すると、`my-nginx`コンテナが停止します。

*   **停止したコンテナの削除: `docker rm`**

    コンテナは、停止しただけでは、ディスク上に、データが残っています。不要になったコンテナは、`docker rm`で、完全に削除します。

    ```bash
    docker rm my-nginx
    ```

    **注意**: 実行中のコンテナは、`rm`できません。先に`stop`する必要があります。

### 🖼️ イメージの管理

*   **イメージの一覧: `docker images`**

    ローカルにダウンロードされている、イメージの一覧を表示します。

    ```bash
    docker images
    ```

    `nginx`や`hello-world`のイメージが表示されるはずです。

---

## ✨ まとめ

このセクションでは、Dockerを操作するための、基本的なコマンド群を学びました。

| コマンド | 役割 |
| :--- | :--- |
| `docker run <イメージ名>` | イメージから新しいコンテナを作成・実行 |
| `docker ps` | 実行中のコンテナを一覧表示 |
| `docker ps -a` | 全てのコンテナを一覧表示（停止中も含む） |
| `docker exec -it <コンテナ名> bash` | コンテナの中に入る |
| `docker stop <コンテナ名>` | コンテナを停止 |
| `docker rm <コンテナ名>` | 停止したコンテナを削除 |
| `docker images` | イメージの一覧を表示 |

これらのコマンドは、Dockerの基礎です。本チュートリアルでは、Laravelの開発環境として「Sail」を使用するため、これらのコマンドを直接使う機会は少ないですが、**Dockerが裏で何をしているのかを理解する**ために、これらの概念を知っておくことは重要です。

次のセクションでは、イメージとコンテナの関係について、さらに詳しく学んでいきます。

---
