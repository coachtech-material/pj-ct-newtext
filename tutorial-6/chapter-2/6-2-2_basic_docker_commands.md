# Tutorial 6-2-2: Dockerの基本コマンド

## 🎯 このセクションで学ぶこと

*   Dockerを操作するための、最も基本的で、重要なコマンド（`run`, `ps`, `exec`, `stop`, `rm`, `images`, `rmi`）を学ぶ。
*   コンテナのライフサイクル（作成、実行、停止、削除）を、コマンドと関連付けて理解する。
*   実行中のコンテナの、中に入る方法を学ぶ。

---

## 導入

Dockerのインストールが完了し、`hello-world`コンテナを動かすことにも成功しました。いよいよ、ここからが本番です。このセクションでは、Dockerを、コマンドラインから、自在に操るための、基本的なコマンドを学んでいきます。

コマンドラインでの操作は、最初は、難しく感じるかもしれませんが、一度、覚えてしまえば、GUIツールよりも、遥かに、速く、効率的に、作業を進めることができます。エンジニアの仕事は、コマンドラインと、切っても切れない関係にありますので、ここで、しっかりと、基礎を固めておきましょう。

このセクションで学ぶコマンドは、Dockerを扱う上で、毎日、何度も使うことになる、超重要コマンドばかりです。一つ一つのコマンドの意味と役割を、実際に、手を動かしながら、確認していきましょう。

---

## 詳細解説

### 🏃 コンテナの実行: `docker run`

`docker run`は、新しいコンテナを、作成し、実行するための、最も基本的なコマンドです。`hello-world`の時にも使いましたね。

今度は、もう少し、実用的なコンテナとして、Webサーバーである、**Nginx（エンジンエックス）**のコンテナを、動かしてみましょう。

```bash
docker run --name my-nginx -d -p 8080:80 nginx
```

このコマンドは、少し複雑に見えるので、分解して見ていきましょう。

*   `docker run`: 新しいコンテナを実行します。
*   `--name my-nginx`: コンテナに、「my-nginx」という、人間が識別しやすい名前を付けます。これを指定しないと、Dockerが、ランダムな名前（例: `jolly_torvalds`）を自動的に付けます。
*   `-d`: 「Detachedモード」の略で、コンテナを、**バックグラウンドで**実行します。これを付けないと、ターミナルが、コンテナのログ出力に占有されてしまいます。
*   `-p 8080:80`: 「Port-forwarding」の略で、ホストOS（あなたのPC）のポートと、コンテナのポートを、繋ぎます。この例では、「**PCの8080番ポートへのアクセスを、コンテナの80番ポートに転送する**」という意味になります。Nginxは、デフォルトで、80番ポートで、リクエストを待ち受けています。
*   `nginx`: 実行する、**イメージ名**です。Dockerは、まず、ローカルに`nginx`というイメージがあるかを探し、なければ、Docker Hub（後述）という、公開レジストリから、自動的に、最新版をダウンロードしてきます。

このコマンドを実行した後、Webブラウザで、`http://localhost:8080` にアクセスしてみてください。「Welcome to nginx!」というページが表示されれば、あなたのPC上で、Nginxコンテナが、正常に動いている証拠です。

### 📋 実行中のコンテナ一覧: `docker ps`

`docker ps` (Process Status) は、現在、実行中のコンテナの一覧を表示するコマンドです。

```bash
docker ps
```

先ほど起動した `my-nginx` コンテナの情報（コンテナID、イメージ名、ポート設定、名前など）が、表形式で表示されるはずです。

停止中のコンテナも含めて、全てのコンテナを表示したい場合は、`-a` (all) オプションを付けます。

```bash
docker ps -a
```

### 💻 コンテナの中に入る: `docker exec`

`docker exec` (Execute) は、実行中のコンテナの中で、特定のコマンドを実行するためのコマンドです。特に、コンテナの、中に入って、対話的に操作したい場合（デバッグなどで多用します）に、非常に便利です。

```bash
docker exec -it my-nginx /bin/bash
```

*   `-it`: 「Interactive & TTY」の略で、コンテナと、対話的に、やり取りをするための、おまじないだと思ってください。
*   `my-nginx`: コマンドを実行する、対象のコンテナ名。
*   `/bin/bash`: コンテナの中で実行するコマンド。ここでは、`bash`という、シェル（人間からの命令を、OSに伝えるプログラム）を起動しています。

このコマンドを実行すると、ターミナルのプロンプトが、コンテナ内のものに切り替わります。`ls` や `pwd` などのコマンドを打ってみると、そこが、ホストOSとは、完全に隔離された、コンテナの中の世界であることが、実感できるでしょう。コンテナから出るには、`exit`と入力します。

### 🛑 コンテナの停止と削除

*   **コンテナの停止: `docker stop`**

    ```bash
    docker stop my-nginx
    ```

    このコマンドを実行すると、`my-nginx`コンテナが停止します。`docker ps`で確認すると、一覧から消えているはずです（`docker ps -a`には残っています）。

*   **停止したコンテナの削除: `docker rm`**

    コンテナは、停止しただけでは、ディスク上に、データが残っています。不要になったコンテナは、`docker rm`で、完全に削除します。

    ```bash
    docker rm my-nginx
    ```

    **注意**: 実行中のコンテナは、`rm`できません。先に`stop`する必要があります。

### 🖼️ イメージの管理

*   **イメージの一覧: `docker images`**

    ローカルにダウンロードされている、イメージの一覧を表示します。

    ```bash
    docker images
    ```

    `nginx`や`hello-world`のイメージが表示されるはずです。

*   **イメージの削除: `docker rmi`**

    不要になったイメージを削除します。

    ```bash
    docker rmi hello-world
    ```

    **注意**: そのイメージを使用しているコンテナが存在する場合、イメージは削除できません。先に、関連するコンテナを、`docker rm`で削除する必要があります。

---

## ✨ まとめ

このセクションでは、Dockerを操作するための、基本的なコマンド群を学びました。これらのコマンドの関係性を、コンテナのライフサイクルと合わせて、整理しておきましょう。

1.  `docker run nginx`: `nginx`イメージから、新しいコンテナを**作成**し、**実行**する。
2.  `docker ps`: **実行中**のコンテナを確認する。
3.  `docker exec -it <コンテナ名> bash`: **実行中**のコンテナの、中に入る。
4.  `docker stop <コンテナ名>`: コンテナを**停止**する。
5.  `docker rm <コンテナ名>`: **停止**したコンテナを**削除**する。

これらのコマンドは、基本中の基本ですが、これらを組み合わせることで、Dockerの、多くの操作が可能になります。何度も、繰り返し、コマンドを打って、手に馴染ませていきましょう。

次のセクションでは、イメージとコンテナの関係について、さらに、深く掘り下げていきます。

---
