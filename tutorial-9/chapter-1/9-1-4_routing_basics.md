# Tutorial 9-1-4: ルーティングの基礎

## 🎯 このセクションで学ぶこと

- ルーティングが何であるか、その役割を理解する
- 前セクションで学んだMVCの流れを、より具体的にイメージできるようになる

> **📌 このセクションの目的**
> 
> このセクションは、Laravelの中心概念である**MVCのイメージを膨らませる**ことが目的です。
> コードの書き方を覚えることよりも、「ルーティングがどんな役割を果たしているのか」を直感的に理解することを優先してください。
> 実際のコードの書き方は、次のセクション以降で詳しく学びます。

---

## 🍽️ ルーティングを「レストラン」で理解しよう

前のセクションで、MVCアーキテクチャの全体像を学びました。ここでは、**レストランの比喩**を使って、ルーティングの役割をより深く理解していきましょう。

---

### レストランの登場人物

Laravelの仕組みは、レストランの営業にそっくりです。それぞれのファイルが従業員のように役割分担をして働いています。

| 専門用語 | レストランでの役割 | 説明 |
|:---|:---|:---|
| **ユーザー（ブラウザ）** | お客さん | 料理（ページ）を注文する人 |
| **ルーティング** | 受付係 / メニュー | 「ハンバーグ定食」という注文を、担当のウェイターに割り振る |
| **コントローラー** | ウェイター（司令塔） | 注文を聞き、厨房に指示を出し、出来た料理を運ぶ。**自分では料理しない** |
| **モデル** | シェフ / 食材係 | ウェイターの指示で食材（データ）を冷蔵庫（DB）から取り出し、下ごしらえして渡す |
| **ビュー** | 盛り付け担当 | シェフから受け取った食材をお皿に綺麗に盛り付け、お客様に出せる状態にする |

---

## 📋 ルーティング = 受付係

ルーティングは、レストランでいう**受付係**です。

お客さん（ユーザー）が「ユーザー一覧が見たい」と注文すると、受付係は「それはユーザー担当のウェイター（UserController）の仕事ですね」と案内します。

```
お客さん: 「/users のページをください」

受付係: 「かしこまりました。ユーザー担当のウェイター（UserController）にお繋ぎします」
```

つまり、ルーティングの役割は、**「どのURLにアクセスしたら、どのウェイター（コントローラー）が対応するか」を決めること**です。

---

## 🔄 注文から料理が届くまでの流れ

お客さんが「ユーザー一覧」を注文してから、画面が表示されるまでの流れを、レストランの比喩で追ってみましょう。

### 1. 注文（リクエスト）

お客さん（ブラウザ）が「ユーザー一覧が見たい」と注文します。

```
お客さん: 「/users のページをください」
```

---

### 2. 受付（ルーティング）

受付係（ルーティング）が、注文を受け取ります。

```
受付係: 「/users のご注文ですね。それはユーザー担当のウェイター（UserController）の仕事です」
```

受付係は、**メニュー表（routes/web.php）**を見て、どのウェイターに担当させるかを決めます。

---

### 3. 指示（コントローラー）

ウェイター（コントローラー）が、受付から注文を受け取ります。

```
ウェイター: 「ユーザー一覧のご注文ですね。シェフ、ユーザーデータをお願いします！」
```

ウェイターは**司令塔**です。自分では料理（データ処理）も盛り付け（HTML生成）もしません。シェフと盛り付け担当に指示を出すだけです。

---

### 4. 調達（モデル）

シェフ（モデル）が、冷蔵庫（データベース）からデータを取り出します。

```
シェフ: 「冷蔵庫からユーザー情報を全員分取ってきました。はい、ウェイターさん」
```

シェフは、データベースから必要なデータを取り出し、使いやすい形に整えてウェイターに渡します。

---

### 5. 盛り付け（ビュー）

ウェイターは、シェフから受け取ったデータを盛り付け担当（ビュー）に渡します。

```
ウェイター: 「このユーザーデータを使って、一覧画面を作ってください」

盛り付け担当: 「受け取ったユーザー名をおしゃれなリスト形式に並べて、お客様が見やすいページを作りました」
```

---

### 6. 提供（レスポンス）

出来上がった料理（HTML）を、ウェイターがお客さんの元へ運びます。

```
ウェイター: 「お待たせしました。ユーザー一覧でございます」
```

お客さん（ブラウザ）の画面に、ユーザー一覧が表示されます。

---

## 📊 処理の流れ（図解）

```
[お客さん（ブラウザ）]
   ↓ 「/users のページをください」
[受付係（ルーティング）]
   ↓ 「UserController さん、お願いします」
[ウェイター（コントローラー）]
   ↓ 「シェフ、ユーザーデータをください」
[シェフ（モデル）]
   ↓ 冷蔵庫（データベース）からデータを取り出す
[冷蔵庫（データベース）]
   ↑ ユーザーデータを渡す
[シェフ（モデル）]
   ↑ データを整えてウェイターに渡す
[ウェイター（コントローラー）]
   ↓ 「盛り付け担当さん、このデータで画面を作ってください」
[盛り付け担当（ビュー）]
   ↓ HTMLを生成
[お客さん（ブラウザ）]
   ← ユーザー一覧が表示される
```

---

## 📁 ルーティングのファイルはどこにある？

レストランの比喩で理解したところで、実際のファイルの場所を確認しましょう。

ルーティング（受付係のメニュー表）は、**`routes/web.php`** というファイルに書かれています。

```
src/
└── routes/
    └── web.php  ← ここにルーティングを定義する
```

このファイルに、「どのURLにアクセスしたら、どのコントローラーが対応するか」を書いていきます。

---

## 🍽️ メニュー表（routes/web.php）のイメージ

`routes/web.php` は、レストランの**メニュー表**のようなものです。

| 注文（URL） | 担当ウェイター（コントローラー） |
|:---|:---|
| `/` | トップページ担当 |
| `/users` | ユーザー担当（UserController） |
| `/users/123` | ユーザー担当（UserController）※ 123番のお客様の詳細 |
| `/tasks` | タスク担当（TaskController） |

お客さんが「`/users`」と注文すると、受付係はメニュー表を見て、「ユーザー担当のウェイター（UserController）にお繋ぎします」と案内します。

---

## 💡 TIP: なぜ役割を分けるのか？

レストランで、受付係・ウェイター・シェフ・盛り付け担当が別々にいるのはなぜでしょうか？

**全部一人でやると、お店が回らなくなるから**です。

同じように、Webアプリケーションでも、全ての処理を1つのファイルに書いてしまうと、コードが複雑になり、修正が困難になります。

役割を分けることで：

- **受付係（ルーティング）**だけを変更すれば、URLの構成を変えられる
- **シェフ（モデル）**だけを変更すれば、データの取得方法を変えられる
- **盛り付け担当（ビュー）**だけを変更すれば、画面のデザインを変えられる

それぞれの担当が独立しているので、**一箇所を変えても他に影響しない**のです。

---

## ✨ まとめ

このセクションでは、ルーティングの役割をレストランの比喩で学びました。

| 専門用語 | レストランでの役割 | 実際のファイル |
|:---|:---|:---|
| **ルーティング** | 受付係 / メニュー表 | `routes/web.php` |
| **コントローラー** | ウェイター（司令塔） | `app/Http/Controllers/` |
| **モデル** | シェフ / 食材係 | `app/Models/` |
| **ビュー** | 盛り付け担当 | `resources/views/` |

> **📌 ポイント**
> 
> このセクションでは、ルーティングの**概念と役割**を理解することが目的でした。
> 実際のコードの書き方（`Route::get()` など）は、次のセクション以降で詳しく学んでいきます。
> 今は「ルーティングは受付係」というイメージを持っていれば大丈夫です。

次のセクションでは、リクエストとレスポンスの基礎について学びます。

---
