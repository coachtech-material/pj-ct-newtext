# Tutorial 13-1-1: 要件定義

## 🎯 このセクションで学ぶこと

- 書籍レビューアプリの要件を定義する方法を学ぶ
- 機能一覧を作成し、GitHub Issuesに登録する準備をする
- 要件定義の重要性と、実務での活用方法を理解する

---

## 🧠 先輩エンジニアの思考プロセス

### 「なぜ要件定義から始めるのか？」

新しいプロジェクトを始めるとき、いきなりコードを書き始めたくなるかもしれません。しかし、先輩エンジニアは必ず**要件定義から始めます**。

### 理由1: 全体像を把握するため

```
❌ いきなりコードを書く
→ 途中で「この機能も必要だった」と気づく
→ 設計をやり直す羽目になる

✅ 要件定義から始める
→ 必要な機能を洗い出す
→ 効率的に開発を進められる
```

### 理由2: 見積もりを出すため

実務では「この機能、いつまでにできる？」と聞かれます。要件定義がないと、**何を作るかわからないので見積もりが出せません**。

### 理由3: 認識のズレを防ぐため

クライアントが「書籍管理アプリ」と言ったとき、あなたが想像するものとクライアントが想像するものは**違うかもしれません**。要件定義で認識を合わせます。

---

### このChapterの実装順序

| 順番 | セクション | 理由 |
|:---:|:---|:---|
| 1 | 要件定義（本セクション） | 何を作るかを明確にする |
| 2 | データベース設計 | データ構造を決める |
| 3 | 画面設計 | UIを決める |
| 4 | 開発環境構築 | 開発できる状態にする |
| 5 | Git/GitHub準備 | バージョン管理を始める |
| 6 | アセット配置 | 共通部品を準備する |

> 💡 **ポイント**: 「設計 → 環境構築 → 開発」の順序が基本です。設計なしに開発を始めると、後で大きな手戻りが発生します。

---

## 導入：なぜ要件定義が必要なのか

**要件定義（Requirements Definition）**とは、**開発するシステムの機能や仕様を明確にする作業**です。

実務では、クライアントや上司から「こんなシステムを作ってほしい」と依頼されることがあります。しかし、その依頼は曖昧なことが多く、「何を作ればいいのか」が明確でないことがあります。

要件定義を行うことで、**開発の全体像を把握し、何を作るべきかを明確にする**ことができます。

---

## Step 1: 要件定義とは

要件定義は、以下の3つのステップで行います。

1. **ヒアリング**: クライアントや上司から、どんなシステムを作りたいのかを聞く
2. **整理**: ヒアリングした内容を整理し、機能一覧を作成する
3. **合意**: クライアントや上司と、機能一覧を確認し、合意を得る

---

## Step 2: 書籍レビューアプリの要件

このTutorialでは、**書籍レビューアプリ（book-review-app）**を開発します。

書籍レビューアプリとは、**読んだ本の情報と感想を記録・管理するシステム**です。

---

#### ヒアリング内容

クライアントから、以下のような依頼を受けたとします。

> 「書籍レビューアプリを作ってほしい。本のタイトルや著者を登録して、評価と感想を記録できるようにしたい。ログインして自分のレビューだけを管理できるようにしてほしい。」

---

#### 要件を整理する

ヒアリング内容を整理すると、以下のような機能が必要だとわかります。

**基本機能（CRUD）**:
- 書籍の登録
- 書籍一覧の表示
- 書籍詳細の表示
- 書籍情報の編集
- 書籍の削除

**公開API機能**:
- 書籍一覧をJSONで取得（認証不要）
- 書籍詳細をJSONで取得（認証不要）

**認証機能**:
- ユーザー登録
- ログイン
- ログアウト
- ログインユーザーのレビューのみ表示・編集可能

---

## Step 3: 機能一覧の作成（GitHub Issues用）

要件を整理したら、**機能一覧**を作成します。

このチュートリアルでは、**各機能をGitHub Issuesに登録し、イシュー駆動開発**を行います。そのため、機能一覧には**Issue番号（チケット番号）**を振ります。

---

#### 機能一覧

| Issue # | 機能名 | 説明 | 優先度 |
|:---:|:---|:---|:---:|
| #1 | 書籍一覧機能 | 登録された書籍の一覧を表示する | 高 |
| #2 | 書籍登録機能 | 新しい書籍を登録する | 高 |
| #3 | 書籍詳細機能 | 書籍の詳細情報を表示する | 高 |
| #4 | 書籍編集機能 | 書籍情報を編集する | 高 |
| #5 | 書籍削除機能 | 書籍を削除する | 高 |
| #6 | 公開API実装 | 認証なしで書籍データをJSONで取得できるAPIを実装 | 中 |
| #7 | ユーザー認証機能 | ユーザー登録・ログイン・ログアウト | 高 |
| #8 | ユーザー別レビュー管理 | ログインユーザーのレビューのみ表示・編集可能にする | 高 |

> 💡 **ポイント**: この機能一覧は、後のセクションでGitHub Issuesに登録します。Issue番号を使ってブランチを作成し、開発を進めていきます。

---

### 💡 TIP: 優先度の設定

機能一覧には、**優先度**を設定します。

- **高**: 必須機能。これがないとシステムとして成立しない
- **中**: 重要な機能。あると便利だが、なくても動作する
- **低**: あると嬉しい機能。余裕があれば実装する

優先度を設定することで、**どの機能から開発すべきか**が明確になります。

---

## Step 4: データ項目の定義

書籍レビューアプリで管理するデータ項目を定義します。

#### 書籍（books）テーブル

| カラム名 | 型 | 説明 |
|:---|:---|:---|
| id | bigint | 主キー |
| user_id | bigint | 登録したユーザーのID |
| title | string | 書籍タイトル |
| author | string | 著者名 |
| rating | integer | 評価（1〜5） |
| review | text | 感想・レビュー |
| created_at | timestamp | 作成日時 |
| updated_at | timestamp | 更新日時 |

---

## Step 5: 画面遷移図の作成

**画面遷移図（Screen Transition Diagram）**とは、**画面の遷移を図で表したもの**です。

画面遷移図を作成することで、**どの画面からどの画面に遷移するのか**が明確になります。

---

#### 画面遷移図

```
[ログイン画面]
    ↓ ログイン成功
[書籍一覧画面]
    ↓ 「新規登録」ボタンをクリック
[書籍登録画面]
    ↓ 「登録」ボタンをクリック
[書籍一覧画面]（登録完了メッセージ表示）
    ↓ 書籍をクリック
[書籍詳細画面]
    ↓ 「編集」ボタンをクリック
[書籍編集画面]
    ↓ 「更新」ボタンをクリック
[書籍詳細画面]（更新完了メッセージ表示）
```

---

## Step 6: イシュー駆動開発の概要

このチュートリアルでは、**イシュー駆動開発（Issue-Driven Development）**を実践します。

#### イシュー駆動開発とは

1. **GitHub Issuesに機能を登録**: 機能一覧をIssueとして登録
2. **Issue番号付きブランチを作成**: `feature/issue-1-book-list`のようなブランチ名
3. **実装してコミット**: コミットメッセージに`Closes #1`を含める
4. **プルリクエストを作成**: セルフレビューを行う
5. **マージしてIssueをクローズ**: 自動でIssueがClosedになる

この流れを繰り返すことで、**実務で必要なGit/GitHub操作が身につきます**。

---

### 🚨 よくある間違い

#### 間違い1: 要件定義を飛ばして開発を始める

**対処法**: 必ず要件定義を行い、機能一覧を作成してから開発を始めます。

---

#### 間違い2: 要件定義が曖昧

**対処法**: 具体的な機能名と説明を記載し、クライアントと合意を得ます。

---

#### 間違い3: 優先度を設定しない

**対処法**: 優先度を設定し、どの機能から開発すべきかを明確にします。

---

## ✨ まとめ

このセクションでは、書籍レビューアプリの要件定義について学びました。

- 要件定義は、開発するシステムの機能や仕様を明確にする作業である
- 機能一覧を作成し、GitHub Issuesに登録する準備をした
- イシュー駆動開発の流れを理解した

次のセクションでは、データベース設計について学びます。

---
